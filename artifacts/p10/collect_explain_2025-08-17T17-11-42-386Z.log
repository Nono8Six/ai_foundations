{
  "description": "EXPLAIN ANALYZE collection",
  "exitCode": 3,
  "timestamp": "2025-08-17T17:11:42.386Z",
  "stdout": "üìã P10: Collecting EXPLAIN ANALYZE for key RPC functions...\r\nüîç Analyzing credit_xp function...\r\n=====================================;\r\n                                                                              QUERY PLAN                                                                               \r\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n Result  (cost=0.00..0.26 rows=1 width=32) (actual time=0.964..0.964 rows=1 loops=1)\r\n   Output: credit_xp('00000000-0000-0000-0000-000000000001'::uuid, 'lesson:completion'::text, 50, 'explain-credit-xp-test'::text, NULL::uuid, NULL::text, '{}'::jsonb)\r\n   Buffers: shared hit=345\r\n Query Identifier: -2722577134236380289\r\n Planning Time: 0.023 ms\r\n Execution Time: 0.978 ms\r\n(6 rows)\r\n\r\n;\r\nüîç Analyzing get_active_xp_sources function...\r\n==============================================;\r\n                                         QUERY PLAN                                          \r\n---------------------------------------------------------------------------------------------\r\n ProjectSet  (cost=0.00..5.27 rows=1000 width=32) (actual time=0.192..0.222 rows=24 loops=1)\r\n   Output: get_active_xp_sources(now())\r\n   Buffers: shared hit=2\r\n   ->  Result  (cost=0.00..0.01 rows=1 width=0) (actual time=0.001..0.001 rows=1 loops=1)\r\n Query Identifier: -1125711535403011146\r\n Planning Time: 0.025 ms\r\n Execution Time: 0.249 ms\r\n(7 rows)\r\n\r\n;\r\nüîç Analyzing compute_level_info function...\r\n===========================================;\r\n                                         QUERY PLAN                                         \r\n--------------------------------------------------------------------------------------------\r\n ProjectSet  (cost=0.00..5.27 rows=1000 width=32) (actual time=0.273..0.278 rows=1 loops=1)\r\n   Output: compute_level_info(150)\r\n   Buffers: shared hit=4\r\n   ->  Result  (cost=0.00..0.01 rows=1 width=0) (actual time=0.001..0.001 rows=1 loops=1)\r\n Query Identifier: -6337873644889589703\r\n Planning Time: 0.018 ms\r\n Execution Time: 0.298 ms\r\n(7 rows)\r\n\r\n;\r\nüîç Skipping unlock_achievement analysis (schema mismatch issue)...\r\n====================================================================;\r\n;\r\nüìä Index Usage Analysis;\r\n========================;\r\n schemaname |     tablename     |                            indexname                            | scans | tuples_read | tuples_fetched \r\n------------+-------------------+-----------------------------------------------------------------+-------+-------------+----------------\r\n public     | level_definitions | ix_level_definitions_level_xp_required                          |  2033 |        2034 |           2033\r\n public     | level_definitions | level_definitions_pkey                                          |   164 |         684 |            684\r\n public     | level_definitions | idx_level_definitions_xp_required                               |     0 |           0 |              0\r\n public     | level_definitions | uq_xp_required                                                  |     0 |           0 |              0\r\n public     | level_definitions | uq_level                                                        |     0 |           0 |              0\r\n public     | profiles          | idx_profiles_user_id                                            |  1533 |       84787 |           1530\r\n public     | profiles          | profiles_pkey                                                   |   142 |         379 |            109\r\n public     | profiles          | idx_profiles_created_at                                         |    64 |          64 |             64\r\n public     | profiles          | profiles_email_key                                              |     0 |           0 |              0\r\n public     | profiles          | idx_profiles_admin                                              |     0 |           0 |              0\r\n public     | profiles          | idx_profiles_xp_level                                           |     0 |           0 |              0\r\n public     | profiles          | idx_profiles_email                                              |     0 |           0 |              0\r\n public     | user_achievements | idx_user_achievements_user_id                                   |     6 |          19 |             17\r\n public     | user_achievements | user_achievements_pkey                                          |     2 |           0 |              0\r\n public     | user_achievements | user_achievements_user_id_achievement_type_achievement_name_key |     0 |           0 |              0\r\n public     | user_achievements | ux_ua_user_ach_ver_scope                                        |     0 |           0 |              0\r\n public     | user_achievements | idx_user_achievements_user_type                                 |     0 |           0 |              0\r\n public     | user_achievements | idx_user_achievements_type                                      |     0 |           0 |              0\r\n public     | xp_events         | uk_xp_events_idempotency                                        |  1072 |         466 |            159\r\n public     | xp_events         | xp_events_pkey                                                  |    10 |          20 |             10\r\n public     | xp_events         | idx_xp_events_user_aggregates                                   |     2 |           2 |              0\r\n public     | xp_events         | idx_xp_events_user_created                                      |     1 |         174 |            162\r\n public     | xp_events         | idx_xp_events_source_stats                                      |     0 |           0 |              0\r\n public     | xp_events         | idx_xp_events_source_type                                       |     0 |           0 |              0\r\n public     | xp_events         | idx_xp_events_created_at                                        |     0 |           0 |              0\r\n public     | xp_sources        | uq_xp_sources_type_action_version                               |    92 |          88 |             84\r\n public     | xp_sources        | ex_xp_sources_active_overlap                                    |     6 |          24 |              4\r\n public     | xp_sources        | xp_sources_pkey                                                 |     5 |          36 |             36\r\n public     | xp_sources        | idx_xp_sources_active_type                                      |     3 |          30 |             20\r\n public     | xp_sources        | idx_xp_sources_active                                           |     0 |           0 |              0\r\n(30 rows)\r\n\r\n;\r\nüìä Table Statistics;\r\n===================;\r\n schemaname |     tablename     | seq_scan | seq_tup_read | idx_scan | idx_tup_fetch | inserts | updates | deletes | live_tuples | dead_tuples \r\n------------+-------------------+----------+--------------+----------+---------------+---------+---------+---------+-------------+-------------\r\n public     | level_definitions |     2493 |        34897 |     2197 |          2717 |      15 |      10 |       0 |          14 |          11\r\n public     | profiles          |    24593 |        21687 |     1739 |          1703 |      20 |    1155 |       0 |           5 |         162\r\n public     | user_achievements |     2339 |         6881 |        8 |            17 |      11 |       4 |       3 |           3 |          12\r\n public     | xp_events         |     3556 |        18352 |     1085 |           333 |     943 |      15 |     647 |         169 |         163\r\n public     | xp_sources        |      928 |         9011 |      106 |           144 |      47 |     166 |      22 |          24 |          26\r\n(5 rows)\r\n\r\n;\r\nüîß Query Plan Cache Stats;\r\n==========================;\r\n",
  "stderr": "psql:C:/GitHub/ai_foundations_lms/scripts/p10/collect_explain.sql:95: ERROR:  column \"mean_time\" does not exist\r\nLINE 5:   mean_time,\r\n          ^\r\nHINT:  Perhaps you meant to reference the column \"pg_stat_user_functions.self_time\".\r\npsql:C:/GitHub/ai_foundations_lms/scripts/p10/collect_explain.sql:95: STATEMENT:  SELECT \r\n  funcname,\r\n  calls,\r\n  total_time,\r\n  mean_time,\r\n  stddev_time,\r\n  self_time\r\nFROM pg_stat_user_functions \r\nWHERE funcname IN ('credit_xp', 'get_active_xp_sources', 'compute_level_info', 'unlock_achievement')\r\nORDER BY funcname;\r\n"
}