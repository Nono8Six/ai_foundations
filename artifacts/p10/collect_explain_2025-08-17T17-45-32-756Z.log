{
  "description": "EXPLAIN ANALYZE collection",
  "exitCode": 3,
  "timestamp": "2025-08-17T17:45:32.756Z",
  "stdout": "üìã P10: Collecting EXPLAIN ANALYZE for key RPC functions...\r\nüîç Analyzing credit_xp function...\r\n=====================================;\r\n                                                                              QUERY PLAN                                                                               \r\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n Result  (cost=0.00..0.26 rows=1 width=32) (actual time=0.962..0.962 rows=1 loops=1)\r\n   Output: credit_xp('00000000-0000-0000-0000-000000000001'::uuid, 'lesson:completion'::text, 50, 'explain-credit-xp-test'::text, NULL::uuid, NULL::text, '{}'::jsonb)\r\n   Buffers: shared hit=345\r\n Query Identifier: -2722577134236380289\r\n Planning Time: 0.017 ms\r\n Execution Time: 0.973 ms\r\n(6 rows)\r\n\r\n;\r\nüîç Analyzing get_active_xp_sources function...\r\n==============================================;\r\n                                         QUERY PLAN                                          \r\n---------------------------------------------------------------------------------------------\r\n ProjectSet  (cost=0.00..5.27 rows=1000 width=32) (actual time=0.172..0.199 rows=24 loops=1)\r\n   Output: get_active_xp_sources(now())\r\n   Buffers: shared hit=2\r\n   ->  Result  (cost=0.00..0.01 rows=1 width=0) (actual time=0.001..0.001 rows=1 loops=1)\r\n Query Identifier: -1125711535403011146\r\n Planning Time: 0.018 ms\r\n Execution Time: 0.222 ms\r\n(7 rows)\r\n\r\n;\r\nüîç Analyzing compute_level_info function...\r\n===========================================;\r\n                                         QUERY PLAN                                         \r\n--------------------------------------------------------------------------------------------\r\n ProjectSet  (cost=0.00..5.27 rows=1000 width=32) (actual time=0.274..0.279 rows=1 loops=1)\r\n   Output: compute_level_info(150)\r\n   Buffers: shared hit=4\r\n   ->  Result  (cost=0.00..0.01 rows=1 width=0) (actual time=0.001..0.001 rows=1 loops=1)\r\n Query Identifier: -6337873644889589703\r\n Planning Time: 0.018 ms\r\n Execution Time: 0.299 ms\r\n(7 rows)\r\n\r\n;\r\nüîç Analyzing unlock_achievement function...\r\n===========================================;\r\n",
  "stderr": "psql:C:/GitHub/ai_foundations_lms/scripts/p10/collect_explain.sql:50: ERROR:  profiles writes must go through credit_xp (ctx=unlock_achievement)\r\nCONTEXT:  PL/pgSQL function profiles_guard_write() line 5 at RAISE\r\nSQL statement \"UPDATE public.profiles \r\n    SET \r\n      xp = v_new_xp,\r\n      level = v_new_level,\r\n      last_xp_event_at = NOW()\r\n    WHERE id = p_user_id\"\r\nPL/pgSQL function unlock_achievement(uuid,text,integer,text,text,uuid) line 170 at SQL statement\r\npsql:C:/GitHub/ai_foundations_lms/scripts/p10/collect_explain.sql:50: STATEMENT:  EXPLAIN (ANALYZE, BUFFERS, VERBOSE, FORMAT TEXT)\r\nSELECT unlock_achievement(\r\n  '00000000-0000-0000-0000-000000000002',\r\n  'P10_LEVEL_2',\r\n  1,\r\n  'explain-unlock-achievement-test',\r\n  NULL,\r\n  NULL\r\n);\r\n"
}