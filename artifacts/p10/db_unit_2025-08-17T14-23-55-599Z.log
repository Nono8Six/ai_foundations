{
  "description": "Database unit tests",
  "exitCode": 3,
  "timestamp": "2025-08-17T14:23:55.599Z",
  "stdout": "ðŸ§ª P10: Starting database unit tests...\r\nBEGIN\r\nðŸ“‹ Testing CHECK constraints...\r\n",
  "stderr": "psql:C:/GitHub/ai_foundations_lms/scripts/p10/db_unit.sql:39: ERROR:  invalid input syntax for type uuid: \"test-negative\"\r\nLINE 8:       'test-negative', 'test-negative-xp-1'\r\n              ^\r\nQUERY:  INSERT INTO xp_events (\r\n      user_id, source_type, action_type, xp_delta, \r\n      xp_before, xp_after, level_before, level_after,\r\n      reference_id, idempotency_key\r\n    ) VALUES (\r\n      '00000000-0000-0000-0000-000000000001', 'test', 'negative', -999999,\r\n      0, -999999, 1, 1,\r\n      'test-negative', 'test-negative-xp-1'\r\n    )\r\nCONTEXT:  PL/pgSQL function inline_code_block line 5 at SQL statement\r\npsql:C:/GitHub/ai_foundations_lms/scripts/p10/db_unit.sql:39: STATEMENT:  DO $$\r\nBEGIN\r\n  -- This should fail if we try to subtract more XP than user has\r\n  BEGIN\r\n    INSERT INTO xp_events (\r\n      user_id, source_type, action_type, xp_delta, \r\n      xp_before, xp_after, level_before, level_after,\r\n      reference_id, idempotency_key\r\n    ) VALUES (\r\n      '00000000-0000-0000-0000-000000000001', 'test', 'negative', -999999,\r\n      0, -999999, 1, 1,\r\n      'test-negative', 'test-negative-xp-1'\r\n    );\r\n    RAISE EXCEPTION 'Expected constraint violation for negative XP total';\r\n  EXCEPTION WHEN check_violation THEN\r\n    RAISE NOTICE 'âœ… CHECK constraint correctly prevented negative XP total';\r\n  END;\r\nEND $$;\r\n"
}