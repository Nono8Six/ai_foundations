{
  "description": "Frontend E2E tests",
  "command": "-C apps/frontend p10:test:e2e",
  "exitCode": 1,
  "timestamp": "2025-08-17T17:53:51.493Z",
  "stdout": "\n> frontend@0.1.0 p10:test:e2e C:\\GitHub\\ai_foundations_lms\\apps\\frontend\n> vitest run src/tests/p10/ --reporter=verbose\n\n\n\u001b[1m\u001b[46m RUN \u001b[49m\u001b[22m \u001b[36mv3.2.4 \u001b[39m\u001b[90mC:/GitHub/ai_foundations_lms/apps/frontend\u001b[39m\n\n \u001b[32m✓\u001b[39m src/tests/p10/e2e-xp-system.test.ts\u001b[2m > \u001b[22mP10 E2E XP System Tests\u001b[2m > \u001b[22mHappy Path: Lesson Completion Flow\u001b[2m > \u001b[22mshould complete lesson and award XP successfully\u001b[32m 47\u001b[2mms\u001b[22m\u001b[39m\n \u001b[32m✓\u001b[39m src/tests/p10/e2e-xp-system.test.ts\u001b[2m > \u001b[22mP10 E2E XP System Tests\u001b[2m > \u001b[22mHappy Path: Lesson Completion Flow\u001b[2m > \u001b[22mshould show loading state during XP operation\u001b[32m 4\u001b[2mms\u001b[22m\u001b[39m\n \u001b[31m×\u001b[39m src/tests/p10/e2e-xp-system.test.ts\u001b[2m > \u001b[22mP10 E2E XP System Tests\u001b[2m > \u001b[22mDouble-Click Protection\u001b[2m > \u001b[22mshould prevent duplicate submissions via idempotent hook\u001b[33m 1025\u001b[2mms\u001b[22m\u001b[39m\n\u001b[31m   → expected \"spy\" to be called 1 times, but got 3 times\n\nIgnored nodes: comments, script, style\n\u001b[36m<html>\u001b[31m\n  \u001b[36m<head />\u001b[31m\n  \u001b[36m<body>\u001b[31m\n    \u001b[36m<div>\u001b[31m\n      \u001b[36m<div>\u001b[31m\n        \u001b[36m<button\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"complete-lesson-btn\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0mComplete Lesson\u001b[0m\n        \u001b[36m</button>\u001b[31m\n      \u001b[36m</div>\u001b[31m\n    \u001b[36m</div>\u001b[31m\n  \u001b[36m</body>\u001b[31m\n\u001b[36m</html>\u001b[31m\u001b[39m\n \u001b[32m✓\u001b[39m src/tests/p10/e2e-xp-system.test.ts\u001b[2m > \u001b[22mP10 E2E XP System Tests\u001b[2m > \u001b[22mDouble-Click Protection\u001b[2m > \u001b[22mshould handle idempotent responses correctly\u001b[32m 8\u001b[2mms\u001b[22m\u001b[39m\n \u001b[32m✓\u001b[39m src/tests/p10/e2e-xp-system.test.ts\u001b[2m > \u001b[22mP10 E2E XP System Tests\u001b[2m > \u001b[22mError Handling\u001b[2m > \u001b[22mshould display lock_not_acquired error with retry guidance\u001b[32m 4\u001b[2mms\u001b[22m\u001b[39m\n \u001b[32m✓\u001b[39m src/tests/p10/e2e-xp-system.test.ts\u001b[2m > \u001b[22mP10 E2E XP System Tests\u001b[2m > \u001b[22mError Handling\u001b[2m > \u001b[22mshould display conflict_mismatch error appropriately\u001b[32m 2\u001b[2mms\u001b[22m\u001b[39m\n \u001b[32m✓\u001b[39m src/tests/p10/e2e-xp-system.test.ts\u001b[2m > \u001b[22mP10 E2E XP System Tests\u001b[2m > \u001b[22mError Handling\u001b[2m > \u001b[22mshould handle network errors gracefully\u001b[32m 2\u001b[2mms\u001b[22m\u001b[39m\n \u001b[32m✓\u001b[39m src/tests/p10/e2e-xp-system.test.ts\u001b[2m > \u001b[22mP10 E2E XP System Tests\u001b[2m > \u001b[22mOffline Retry Scenarios\u001b[2m > \u001b[22mshould handle offline state and retry logic\u001b[32m 7\u001b[2mms\u001b[22m\u001b[39m\n \u001b[32m✓\u001b[39m src/tests/p10/e2e-xp-system.test.ts\u001b[2m > \u001b[22mP10 E2E XP System Tests\u001b[2m > \u001b[22mOffline Retry Scenarios\u001b[2m > \u001b[22mshould maintain idempotency across retry attempts\u001b[32m 16\u001b[2mms\u001b[22m\u001b[39m\n \u001b[32m✓\u001b[39m src/tests/p10/e2e-xp-system.test.ts\u001b[2m > \u001b[22mP10 E2E XP System Tests\u001b[2m > \u001b[22mBrowser State Management\u001b[2m > \u001b[22mshould handle page refresh without duplicate operations\u001b[32m 14\u001b[2mms\u001b[22m\u001b[39m\n \u001b[32m✓\u001b[39m src/tests/p10/e2e-xp-system.test.ts\u001b[2m > \u001b[22mP10 E2E XP System Tests\u001b[2m > \u001b[22mBrowser State Management\u001b[2m > \u001b[22mshould prevent operations during back button navigation\u001b[32m 1\u001b[2mms\u001b[22m\u001b[39m\n \u001b[32m✓\u001b[39m src/tests/p10/e2e-xp-system.test.ts\u001b[2m > \u001b[22mP10 E2E Performance\u001b[2m > \u001b[22mshould complete XP operations within acceptable time limits\u001b[32m 14\u001b[2mms\u001b[22m\u001b[39m\n\n\u001b[2m Test Files \u001b[22m \u001b[1m\u001b[31m1 failed\u001b[39m\u001b[22m\u001b[90m (1)\u001b[39m\n\u001b[2m      Tests \u001b[22m \u001b[1m\u001b[31m1 failed\u001b[39m\u001b[22m\u001b[2m | \u001b[22m\u001b[1m\u001b[32m11 passed\u001b[39m\u001b[22m\u001b[90m (12)\u001b[39m\n\u001b[2m   Start at \u001b[22m 19:53:48\n\u001b[2m   Duration \u001b[22m 2.94s\u001b[2m (transform 69ms, setup 128ms, collect 304ms, tests 1.15s, environment 565ms, prepare 111ms)\u001b[22m\n\n ELIFECYCLE  Command failed with exit code 1.\n",
  "stderr": "\u001b[1m\u001b[43m DEPRECATED \u001b[49m\u001b[22m \u001b[33m\"environmentMatchGlobs\" is deprecated. Use `test.projects` to define different configurations instead.\u001b[39m\n\n\u001b[31m⎯⎯⎯⎯⎯⎯⎯\u001b[39m\u001b[1m\u001b[41m Failed Tests 1 \u001b[49m\u001b[22m\u001b[31m⎯⎯⎯⎯⎯⎯⎯\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/tests/p10/e2e-xp-system.test.ts\u001b[2m > \u001b[22mP10 E2E XP System Tests\u001b[2m > \u001b[22mDouble-Click Protection\u001b[2m > \u001b[22mshould prevent duplicate submissions via idempotent hook\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected \"spy\" to be called 1 times, but got 3 times\n\nIgnored nodes: comments, script, style\n\u001b[36m<html>\u001b[31m\n  \u001b[36m<head />\u001b[31m\n  \u001b[36m<body>\u001b[31m\n    \u001b[36m<div>\u001b[31m\n      \u001b[36m<div>\u001b[31m\n        \u001b[36m<button\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"complete-lesson-btn\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0mComplete Lesson\u001b[0m\n        \u001b[36m</button>\u001b[31m\n      \u001b[36m</div>\u001b[31m\n    \u001b[36m</div>\u001b[31m\n  \u001b[36m</body>\u001b[31m\n\u001b[36m</html>\u001b[31m\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m src/tests/p10/e2e-xp-system.test.ts:\u001b[2m202:29\u001b[22m\u001b[39m\n    \u001b[90m200| \u001b[39m      \u001b[90m// Wait for any async operations\u001b[39m\n    \u001b[90m201| \u001b[39m      \u001b[35mawait\u001b[39m \u001b[34mwaitFor\u001b[39m(() \u001b[33m=>\u001b[39m {\n    \u001b[90m202| \u001b[39m        \u001b[34mexpect\u001b[39m(mockExecute)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalledTimes\u001b[39m(\u001b[34m1\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                            \u001b[31m^\u001b[39m\n    \u001b[90m203| \u001b[39m      })\u001b[33m;\u001b[39m\n    \u001b[90m204| \u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m runWithExpensiveErrorDiagnosticsDisabled ../../node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/config.js:\u001b[2m47:12\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m checkCallback ../../node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/wait-for.js:\u001b[2m124:77\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Timeout.checkRealTimersCallback ../../node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/wait-for.js:\u001b[2m118:16\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/1]⎯\u001b[22m\u001b[39m\n\n"
}