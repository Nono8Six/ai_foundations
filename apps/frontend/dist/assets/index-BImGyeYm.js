import{r as p,a as w,u as V,j as e,I as r,i as k,t as j,l as D,b as B,L as S}from"./index-muy6mdYR.js";import{u as R}from"./index.esm-B2kv4BN-.js";import{T as F,B as q,C as P}from"./Card-BJIkea3X.js";const I=({onSuccess:i,isLoading:s,setIsLoading:t})=>{const[o,n]=p.useState(!1),m=w(),{register:l,handleSubmit:d,formState:{errors:u},setError:h,watch:_,clearErrors:c,getValues:N}=R(),{signIn:v,resendVerificationEmail:A,authError:x,clearAuthError:E}=V();p.useEffect(()=>(E(),()=>{E()}),[]);const z=_("email"),L=_("password");p.useEffect(()=>{u.email&&c("email"),u.password&&c("password"),x&&E()},[z,L]);const y=a=>{if(a){if(typeof a=="string")return a;if(typeof a=="object"&&a!==null&&"message"in a&&typeof a.message=="string")return a.message}},C=async a=>{var g,b,G,H;t(!0),E();try{const f=await v({email:a.email,password:a.password});if(!f)throw new Error("Aucune réponse du serveur");if(f.error)throw f.error;if((b=(g=f.data)==null?void 0:g.session)!=null&&b.user)i({id:f.data.session.user.id,email:f.data.session.user.email??"",role:((G=f.data.session.user.user_metadata)==null?void 0:G.role)||"student",name:((H=f.data.session.user.user_metadata)==null?void 0:H.full_name)||"User"});else throw new Error("Aucune session utilisateur valide")}catch(f){D.error({msg:"Login error",error:f}),h("email",{type:"manual",message:"Vérifiez votre email"}),h("password",{type:"manual",message:"Vérifiez votre mot de passe"})}finally{t(!1)}};return e.jsxDEV("form",{onSubmit:d(C),className:"space-y-4",children:[e.jsxDEV(F,{id:"email",type:"email",label:"Adresse email",placeholder:"votre@email.com",error:y(u.email),disabled:s,autoComplete:"email",...l("email",{required:"L'adresse email est requise",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Adresse email invalide"}})},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/LoginForm.tsx",lineNumber:135,columnNumber:7},void 0),e.jsxDEV(F,{id:"password",type:"password",label:"Mot de passe",placeholder:"••••••••",error:y(u.password),disabled:s,autoComplete:"current-password",...l("password",{required:"Le mot de passe est requis",minLength:{value:6,message:"Le mot de passe doit contenir au moins 6 caractères"}})},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/LoginForm.tsx",lineNumber:153,columnNumber:7},void 0),x&&e.jsxDEV("div",{className:"p-4 bg-error-50 border border-error-200 rounded-lg",children:e.jsxDEV("div",{className:"flex items-start",children:[e.jsxDEV(r,{name:"AlertTriangle",className:"h-5 w-5 text-error-400 mr-3"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/LoginForm.tsx",lineNumber:174,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("p",{className:"text-sm font-medium text-error-800",children:x.message},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/LoginForm.tsx",lineNumber:176,columnNumber:15},void 0),k(x)&&x.code==="email_not_confirmed"&&e.jsxDEV("div",{className:"mt-2",children:e.jsxDEV("button",{type:"button",disabled:o,onClick:async a=>{var g;a.preventDefault(),n(!0);try{const b=(g=N("email"))==null?void 0:g.trim();if(!b){j.error("Veuillez d'abord entrer votre adresse email");return}await A(b),j.success("Email de vérification envoyé avec succès !")}catch(b){const G=y(b)||"Erreur lors de l'envoi de l'email de vérification";j.error(G)}finally{n(!1)}},className:"text-sm text-blue-600 hover:text-blue-500 mt-1 flex items-center gap-2",children:[o&&e.jsxDEV("span",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/LoginForm.tsx",lineNumber:203,columnNumber:5},void 0),"Renvoyer l’email de vérification"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/LoginForm.tsx",lineNumber:179,columnNumber:19},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/LoginForm.tsx",lineNumber:178,columnNumber:17},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/LoginForm.tsx",lineNumber:175,columnNumber:13},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/LoginForm.tsx",lineNumber:173,columnNumber:11},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/LoginForm.tsx",lineNumber:172,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("input",{id:"remember",type:"checkbox",...l("remember"),className:"h-4 w-4 text-primary focus:ring-primary border-border rounded",disabled:s},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/LoginForm.tsx",lineNumber:217,columnNumber:11},void 0),e.jsxDEV("label",{htmlFor:"remember",className:"ml-2 block text-sm text-text-secondary",children:"Se souvenir de moi"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/LoginForm.tsx",lineNumber:224,columnNumber:11},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/LoginForm.tsx",lineNumber:216,columnNumber:9},void 0),e.jsxDEV("div",{className:"text-sm",children:e.jsxDEV("button",{type:"button",className:"font-medium text-primary hover:text-primary-700 transition-colors duration-200",disabled:s,onClick:()=>{m("/forgot-password")},children:"Mot de passe oublié ?"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/LoginForm.tsx",lineNumber:229,columnNumber:11},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/LoginForm.tsx",lineNumber:228,columnNumber:9},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/LoginForm.tsx",lineNumber:215,columnNumber:7},void 0),e.jsxDEV(q,{type:"submit",className:"w-full flex justify-center items-center",disabled:s,children:s?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/LoginForm.tsx",lineNumber:250,columnNumber:13},void 0),"Connexion..."]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/LoginForm.tsx",lineNumber:249,columnNumber:11},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(r,{"aria-hidden":"true",name:"LogIn",size:18,className:"mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/LoginForm.tsx",lineNumber:255,columnNumber:13},void 0),"Se connecter"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/LoginForm.tsx",lineNumber:254,columnNumber:11},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/LoginForm.tsx",lineNumber:243,columnNumber:7},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/LoginForm.tsx",lineNumber:133,columnNumber:5},void 0)},M=({isLoading:i,setIsLoading:s})=>{const{register:t,handleSubmit:o,formState:{errors:n},watch:m}=R(),{signUp:l}=V(),[d,u]=p.useState(""),h=m("password"),_=async c=>{s(!0),u("");try{await l({email:c.email,password:c.password,firstName:c.firstName,lastName:c.lastName})&&(localStorage.setItem("pendingEmail",c.email),window.location.href="/verify-email")}catch(N){const v=N instanceof Error?N:new Error(String(N));D.error("Registration error:",v.message),s(!1),u(v.message||"Erreur lors de l'inscription")}};return e.jsxDEV("form",{onSubmit:o(_),className:"space-y-4",children:[e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"firstName",className:"block text-sm font-medium text-text-primary mb-2",children:"Prénom"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:60,columnNumber:11},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsxDEV(r,{"aria-hidden":"true",name:"User",size:18,className:"text-text-secondary"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:65,columnNumber:15},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:64,columnNumber:13},void 0),e.jsxDEV("input",{id:"firstName",type:"text",...t("firstName",{required:"Le prénom est requis",minLength:{value:2,message:"Le prénom doit contenir au moins 2 caractères"}}),"aria-invalid":!!n.firstName,"aria-describedby":"firstName-error",className:`block w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 ${n.firstName?"border-error bg-error-50 text-error-700":"border-border bg-surface text-text-primary hover:border-primary-300"}`,placeholder:"Marie",disabled:i},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:67,columnNumber:13},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:63,columnNumber:11},void 0),n.firstName&&e.jsxDEV("p",{id:"firstName-error",role:"alert",className:"mt-1 text-sm text-error flex items-center",children:[e.jsxDEV(r,{"aria-hidden":"true",name:"AlertCircle",size:16,className:"mr-1"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:90,columnNumber:15},void 0),n.firstName.message]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:89,columnNumber:13},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:59,columnNumber:9},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"lastName",className:"block text-sm font-medium text-text-primary mb-2",children:"Nom"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:97,columnNumber:11},void 0),e.jsxDEV("input",{id:"lastName",type:"text",...t("lastName",{required:"Le nom est requis",minLength:{value:2,message:"Le nom doit contenir au moins 2 caractères"}}),"aria-invalid":!!n.lastName,"aria-describedby":"lastName-error",className:`block w-full px-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 ${n.lastName?"border-error bg-error-50 text-error-700":"border-border bg-surface text-text-primary hover:border-primary-300"}`,placeholder:"Dubois",disabled:i},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:100,columnNumber:11},void 0),n.lastName&&e.jsxDEV("p",{id:"lastName-error",role:"alert",className:"mt-1 text-sm text-error flex items-center",children:[e.jsxDEV(r,{"aria-hidden":"true",name:"AlertCircle",size:16,className:"mr-1"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:122,columnNumber:15},void 0),n.lastName.message]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:121,columnNumber:13},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:96,columnNumber:9},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:58,columnNumber:7},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"email",className:"block text-sm font-medium text-text-primary mb-2",children:"Adresse email"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:131,columnNumber:9},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsxDEV(r,{"aria-hidden":"true",name:"Mail",size:18,className:"text-text-secondary"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:136,columnNumber:13},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:135,columnNumber:11},void 0),e.jsxDEV("input",{id:"email",type:"email",...t("email",{required:"L'adresse email est requise",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Adresse email invalide"}}),"aria-invalid":!!n.email,"aria-describedby":"email-error",className:`block w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 ${n.email?"border-error bg-error-50 text-error-700":"border-border bg-surface text-text-primary hover:border-primary-300"}`,placeholder:"marie.dubois@email.com",disabled:i},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:138,columnNumber:11},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:134,columnNumber:9},void 0),n.email&&e.jsxDEV("p",{id:"email-error",role:"alert",className:"mt-1 text-sm text-error flex items-center",children:[e.jsxDEV(r,{"aria-hidden":"true",name:"AlertCircle",size:16,className:"mr-1"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:161,columnNumber:13},void 0),n.email.message]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:160,columnNumber:11},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:130,columnNumber:7},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-text-primary mb-2",children:"Mot de passe"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:169,columnNumber:9},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsxDEV(r,{"aria-hidden":"true",name:"Lock",size:18,className:"text-text-secondary"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:174,columnNumber:13},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:173,columnNumber:11},void 0),e.jsxDEV("input",{id:"password",type:"password",...t("password",{required:"Le mot de passe est requis",minLength:{value:8,message:"Le mot de passe doit contenir au moins 8 caractères"},pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/,message:"Le mot de passe doit contenir au moins une majuscule, une minuscule, un chiffre et un caractère spécial"}}),"aria-invalid":!!n.password,"aria-describedby":"password-error",className:`block w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 ${n.password?"border-error bg-error-50 text-error-700":"border-border bg-surface text-text-primary hover:border-primary-300"}`,placeholder:"••••••••",disabled:i},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:176,columnNumber:11},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:172,columnNumber:9},void 0),n.password&&e.jsxDEV("p",{id:"password-error",role:"alert",className:"mt-1 text-sm text-error flex items-center",children:[e.jsxDEV(r,{"aria-hidden":"true",name:"AlertCircle",size:16,className:"mr-1"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:204,columnNumber:13},void 0),n.password.message]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:203,columnNumber:11},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:168,columnNumber:7},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-text-primary mb-2",children:"Confirmer le mot de passe"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:212,columnNumber:9},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsxDEV(r,{"aria-hidden":"true",name:"Lock",size:18,className:"text-text-secondary"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:220,columnNumber:13},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:219,columnNumber:11},void 0),e.jsxDEV("input",{id:"confirmPassword",type:"password",...t("confirmPassword",{required:"La confirmation du mot de passe est requise",validate:c=>c===h||"Les mots de passe ne correspondent pas"}),"aria-invalid":!!n.confirmPassword,"aria-describedby":"confirmPassword-error",className:`block w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 ${n.confirmPassword?"border-error bg-error-50 text-error-700":"border-border bg-surface text-text-primary hover:border-primary-300"}`,placeholder:"••••••••",disabled:i},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:222,columnNumber:11},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:218,columnNumber:9},void 0),n.confirmPassword&&e.jsxDEV("p",{id:"confirmPassword-error",role:"alert",className:"mt-1 text-sm text-error flex items-center",children:[e.jsxDEV(r,{"aria-hidden":"true",name:"AlertCircle",size:16,className:"mr-1"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:242,columnNumber:13},void 0),n.confirmPassword.message]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:241,columnNumber:11},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:211,columnNumber:7},void 0),d&&e.jsxDEV("div",{className:"p-3 bg-error-50 border border-error-200 rounded-lg",children:e.jsxDEV("p",{className:"text-sm text-error-700 flex items-center",children:[e.jsxDEV(r,{"aria-hidden":"true",name:"AlertTriangle",size:16,className:"mr-2 flex-shrink-0"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:252,columnNumber:13},void 0),d]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:251,columnNumber:11},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:250,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex items-start",children:[e.jsxDEV("div",{className:"flex items-center h-5",children:e.jsxDEV("input",{id:"terms",type:"checkbox",...t("terms",{required:"Vous devez accepter les conditions d'utilisation"}),"aria-invalid":!!n.terms,"aria-describedby":"terms-error",className:"h-4 w-4 text-primary focus:ring-primary border-border rounded",disabled:i},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:266,columnNumber:11},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:265,columnNumber:9},void 0),e.jsxDEV("div",{className:"ml-3 text-sm",children:[e.jsxDEV("label",{htmlFor:"terms",className:"text-text-secondary",children:["J’accepte les"," ",e.jsxDEV("a",{href:"#",className:"text-primary hover:text-primary-700 transition-colors duration-200",children:"conditions d’utilisation"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:281,columnNumber:13},void 0)," ","et la"," ",e.jsxDEV("a",{href:"#",className:"text-primary hover:text-primary-700 transition-colors duration-200",children:"politique de confidentialité"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:288,columnNumber:13},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:279,columnNumber:11},void 0),n.terms&&e.jsxDEV("p",{id:"terms-error",role:"alert",className:"mt-1 text-error flex items-center",children:[e.jsxDEV(r,{"aria-hidden":"true",name:"AlertCircle",size:16,className:"mr-1"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:297,columnNumber:15},void 0),n.terms.message]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:296,columnNumber:13},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:278,columnNumber:9},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:264,columnNumber:7},void 0),e.jsxDEV("button",{type:"submit",disabled:i,className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg shadow-subtle text-sm font-medium text-white bg-primary hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:i?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:312,columnNumber:13},void 0),"Création du compte..."]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:311,columnNumber:11},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(r,{"aria-hidden":"true",name:"UserPlus",size:18,className:"mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:317,columnNumber:13},void 0),"Créer mon compte"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:316,columnNumber:11},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:305,columnNumber:7},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/RegisterForm.tsx",lineNumber:56,columnNumber:5},void 0)},$=({isLoading:i,setIsLoading:s,disabled:t})=>{const{signInWithGoogle:o}=V(),[n,m]=p.useState(null),l=async()=>{try{s(!0),m(null),await o()}catch(d){const u=d instanceof Error?d:new Error(String(d));D.error("Google sign-in error:",u.message),m("Erreur de connexion avec Google. Veuillez réessayer."),s(!1)}};return e.jsxDEV("div",{children:[e.jsxDEV("button",{type:"button",onClick:l,disabled:i||t,className:"w-full flex justify-center items-center py-3 px-4 border border-border rounded-lg text-sm font-medium text-text-primary bg-surface hover:bg-secondary-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:i?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/GoogleAuthButton.tsx",lineNumber:42,columnNumber:13},void 0),"Connexion..."]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/GoogleAuthButton.tsx",lineNumber:41,columnNumber:11},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24","aria-hidden":"true",children:[e.jsxDEV("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/GoogleAuthButton.tsx",lineNumber:48,columnNumber:15},void 0),e.jsxDEV("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/GoogleAuthButton.tsx",lineNumber:52,columnNumber:15},void 0),e.jsxDEV("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/GoogleAuthButton.tsx",lineNumber:56,columnNumber:15},void 0),e.jsxDEV("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/GoogleAuthButton.tsx",lineNumber:60,columnNumber:15},void 0),e.jsxDEV("path",{fill:"none",d:"M1 1h22v22H1z"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/GoogleAuthButton.tsx",lineNumber:64,columnNumber:15},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/GoogleAuthButton.tsx",lineNumber:47,columnNumber:13},void 0),"Continuer avec Google"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/GoogleAuthButton.tsx",lineNumber:46,columnNumber:11},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/GoogleAuthButton.tsx",lineNumber:34,columnNumber:7},void 0),n&&e.jsxDEV("div",{className:"mt-2 p-2 bg-error-50 border border-error-200 rounded-lg",children:e.jsxDEV("p",{className:"text-sm text-error-700",children:n},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/GoogleAuthButton.tsx",lineNumber:73,columnNumber:11},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/GoogleAuthButton.tsx",lineNumber:72,columnNumber:9},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/components/GoogleAuthButton.tsx",lineNumber:33,columnNumber:5},void 0)},W=()=>{const i=B(),[s,t]=p.useState("login"),[o,n]=p.useState(!1),m=w(),{user:l}=V();p.useEffect(()=>{i.pathname==="/register"||i.pathname==="/signup"?t("register"):t("login")},[i.pathname]),p.useEffect(()=>{l&&m("/espace")},[l,m]);const d=u=>{n(!0),s==="login"&&(j.success("Connexion réussie !"),u.role==="admin"?m("/admin-dashboard"):m("/espace")),n(!1)};return e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-background to-accent-50 pt-16",children:[e.jsxDEV("div",{className:"flex items-center justify-center min-h-screen px-4 py-12",children:e.jsxDEV("div",{className:"w-full max-w-md",children:[e.jsxDEV("div",{className:"text-center mb-8",children:[e.jsxDEV("div",{className:"w-20 h-20 bg-gradient-to-br from-primary to-primary-700 rounded-full flex items-center justify-center mx-auto mb-6 shadow-medium",children:e.jsxDEV(r,{"aria-hidden":"true",name:"Brain",size:40,color:"white"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:69,columnNumber:15},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:68,columnNumber:13},void 0),e.jsxDEV("h1",{className:"text-3xl font-bold text-text-primary mb-2",children:s==="login"?"Bon retour !":"Rejoignez-nous"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:71,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-text-secondary",children:s==="login"?"Connectez-vous pour continuer votre apprentissage IA":"Commencez votre parcours d&rsquo;apprentissage IA dès aujourd&rsquo;hui"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:74,columnNumber:13},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:67,columnNumber:11},void 0),e.jsxDEV(P,{className:"rounded-2xl overflow-hidden",children:[e.jsxDEV("div",{className:"flex border-b border-border",children:[e.jsxDEV("button",{onClick:()=>t("login"),className:`flex-1 py-4 px-6 text-sm font-medium transition-all duration-200 ${s==="login"?"text-primary bg-primary-50 border-b-2 border-primary":"text-text-secondary hover:text-primary hover:bg-secondary-50"}`,children:[e.jsxDEV(r,{"aria-hidden":"true",name:"LogIn",size:18,className:"inline mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:93,columnNumber:17},void 0),"Connexion"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:85,columnNumber:15},void 0),e.jsxDEV("button",{onClick:()=>t("register"),className:`flex-1 py-4 px-6 text-sm font-medium transition-all duration-200 ${s==="register"?"text-primary bg-primary-50 border-b-2 border-primary":"text-text-secondary hover:text-primary hover:bg-secondary-50"}`,children:[e.jsxDEV(r,{"aria-hidden":"true",name:"UserPlus",size:18,className:"inline mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:104,columnNumber:17},void 0),"Inscription"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:96,columnNumber:15},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:84,columnNumber:13},void 0),e.jsxDEV("div",{className:"p-6",children:[e.jsxDEV($,{isLoading:o,setIsLoading:n,disabled:o},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:112,columnNumber:15},void 0),e.jsxDEV("div",{className:"relative my-6",children:[e.jsxDEV("div",{className:"absolute inset-0 flex items-center",children:e.jsxDEV("div",{className:"w-full border-t border-border"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:121,columnNumber:19},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:120,columnNumber:17},void 0),e.jsxDEV("div",{className:"relative flex justify-center text-sm",children:e.jsxDEV("span",{className:"px-4 bg-surface text-text-secondary",children:"ou continuez avec votre email"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:124,columnNumber:19},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:123,columnNumber:17},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:119,columnNumber:15},void 0),s==="login"?e.jsxDEV(I,{onSuccess:d,isLoading:o,setIsLoading:n},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:132,columnNumber:17},void 0):e.jsxDEV(M,{isLoading:o,setIsLoading:n},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:138,columnNumber:17},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:110,columnNumber:13},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:82,columnNumber:11},void 0),e.jsxDEV("div",{className:"text-center mt-6 space-y-3",children:s==="login"?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(S,{to:"/forgot-password",className:"block text-sm text-primary hover:text-primary-700 transition-colors duration-200",children:"Mot de passe oublié ?"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:147,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-sm text-text-secondary",children:["Pas encore de compte ?"," ",e.jsxDEV("button",{onClick:()=>t("register"),className:"text-primary hover:text-primary-700 font-medium transition-colors duration-200",children:"Créer un compte"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:155,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:153,columnNumber:17},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:146,columnNumber:15},void 0):e.jsxDEV("p",{className:"text-sm text-text-secondary",children:["Déjà un compte ?"," ",e.jsxDEV("button",{onClick:()=>t("login"),className:"text-primary hover:text-primary-700 font-medium transition-colors duration-200",children:"Se connecter"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:166,columnNumber:17},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:164,columnNumber:15},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:144,columnNumber:11},void 0),e.jsxDEV("div",{className:"mt-8 p-4 bg-accent-50 border border-accent-200 rounded-lg",children:e.jsxDEV("div",{className:"flex items-start space-x-3",children:[e.jsxDEV(r,{"aria-hidden":"true",name:"Info",size:20,className:"text-accent flex-shrink-0 mt-0.5"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:179,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-accent-700 mb-1",children:"Information de test"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:186,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-accent-600 mb-2",children:"Pour tester l’application, créez un compte ou utilisez Google OAuth."},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:187,columnNumber:17},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:185,columnNumber:15},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:178,columnNumber:13},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:177,columnNumber:11},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:65,columnNumber:9},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:64,columnNumber:7},void 0),o&&e.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-modal",children:e.jsxDEV("div",{className:"bg-surface rounded-lg p-6 flex items-center space-x-4 shadow-medium",children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:200,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-text-primary font-medium",children:"Connexion en cours..."},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:201,columnNumber:13},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:199,columnNumber:11},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:198,columnNumber:9},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/auth/index.tsx",lineNumber:62,columnNumber:5},void 0)};export{W as default};
//# sourceMappingURL=index-BImGyeYm.js.map
