import{r as b,j as e,I as o,l as C,s as K,p as Y,v as ee,w as ne,t as k}from"./index-muy6mdYR.js";import{A as se,u as te}from"./AdminLayout-BGw4aMwQ.js";import{I as W}from"./AppImage-WHMgm8LD.js";import{B,C as T,T as R}from"./Card-BJIkea3X.js";function ie(n){var c;return{id:n.id,title:n.title,description:n.description??void 0,createdAt:n.created_at??void 0,updatedAt:n.updated_at??void 0,type:"course",modules:((c=n.modules)==null?void 0:c.map(a=>{var s;return{id:a.id,title:a.title,description:a.description??void 0,createdAt:a.created_at??void 0,updatedAt:a.updated_at??void 0,courseId:a.course_id??void 0,type:"module",lessons:((s=a.lessons)==null?void 0:s.map(N=>({id:N.id,title:N.title,duration:N.duration??void 0,createdAt:N.created_at??void 0,updatedAt:N.updated_at??void 0,moduleId:N.module_id??void 0,type:"lesson"})))??[]}}))??[]}}function Q(n){return{id:n.id,title:n.title,description:n.description??void 0,createdAt:n.created_at??void 0,updatedAt:n.updated_at??void 0,type:"course",modules:[]}}const oe=({contentData:n,searchQuery:c,selectedContent:a,selectedItems:s,onContentSelect:N,onItemsSelect:m,onReorder:g})=>{const[_,V]=b.useState(new Set),[u,D]=b.useState(null),l=i=>{const r=new Set(_);r.has(i)?r.delete(i):r.add(i),V(r)},h=(i,r)=>{if(r.ctrlKey||r.metaKey){const p=s.includes(i.id)?s.filter(d=>d!==i.id):[...s,i.id];m(p)}else N(i),m([])},j=(i,r)=>{D(r),i.dataTransfer.effectAllowed="move"},E=i=>{i.preventDefault(),i.dataTransfer.dropEffect="move"},H=(i,r)=>{i.preventDefault(),u&&u.id!==r.id&&C.debug("Reordering:",u,"to",r),D(null)},G=i=>{switch(i){case"published":return e.jsxDEV(o,{"aria-hidden":"true",name:"CheckCircle",size:16,className:"text-accent"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:94,columnNumber:16},void 0);case"draft":return e.jsxDEV(o,{"aria-hidden":"true",name:"Clock",size:16,className:"text-warning"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:96,columnNumber:16},void 0);default:return e.jsxDEV(o,{"aria-hidden":"true",name:"Circle",size:16,className:"text-secondary-400"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:98,columnNumber:16},void 0)}},t=i=>{switch(i){case"course":return e.jsxDEV(o,{"aria-hidden":"true",name:"BookOpen",size:16,className:"text-primary"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:105,columnNumber:16},void 0);case"module":return e.jsxDEV(o,{"aria-hidden":"true",name:"Folder",size:16,className:"text-secondary-600"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:107,columnNumber:16},void 0);case"lesson":return e.jsxDEV(o,{"aria-hidden":"true",name:"FileText",size:16,className:"text-secondary-500"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:109,columnNumber:16},void 0);default:return e.jsxDEV(o,{"aria-hidden":"true",name:"File",size:16,className:"text-secondary-400"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:111,columnNumber:16},void 0)}},v=(i,r)=>r?i.filter(p=>{var d;return p.title.toLowerCase().includes(r.toLowerCase())||((d=p.description)==null?void 0:d.toLowerCase().includes(r.toLowerCase()))}):i,x=i=>!i||i.length===0?null:e.jsxDEV("div",{className:"ml-6",children:i.map(r=>e.jsxDEV("div",{draggable:!0,onDragStart:p=>j(p,r),onDragOver:E,onDrop:p=>H(p,r),onClick:p=>h(r,p),className:`flex items-center p-2 rounded-lg cursor-pointer transition-colors duration-200 group ${(a==null?void 0:a.id)===r.id?"bg-primary-50 border border-primary-200":s.includes(r.id)?"bg-accent-50 border border-accent-200":"hover:bg-secondary-50"}`,children:[e.jsxDEV("input",{type:"checkbox",checked:s.includes(r.id),onChange:p=>{p.stopPropagation();const d=p.target.checked?[...s,r.id]:s.filter(f=>f!==r.id);m(d)},className:"mr-2 rounded border-secondary-300 text-primary focus:ring-primary"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:146,columnNumber:13},void 0),t(r.type),e.jsxDEV("div",{className:"flex-1 ml-2 min-w-0",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-sm font-medium text-text-primary truncate",children:r.title},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:163,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center space-x-1 ml-2",children:[G(r.status),e.jsxDEV("span",{className:"text-xs text-text-secondary",children:[r.duration,"min"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:168,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:166,columnNumber:17},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:162,columnNumber:15},void 0),e.jsxDEV("div",{className:"text-xs text-text-secondary mt-1",children:[r.completions," complétions"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:171,columnNumber:15},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:161,columnNumber:13},void 0),e.jsxDEV("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 ml-2",children:e.jsxDEV("button",{className:"p-1 hover:bg-secondary-100 rounded",children:e.jsxDEV(o,{name:"MoreVertical",size:14,"aria-label":"Plus d'options",className:"text-secondary-500"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:178,columnNumber:17},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:177,columnNumber:15},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:176,columnNumber:13},void 0)]},r.id,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:131,columnNumber:11},void 0))},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:129,columnNumber:7},void 0),w=i=>!i||i.length===0?null:e.jsxDEV("div",{className:"ml-6",children:i.map(r=>{var p;return e.jsxDEV("div",{className:"mb-1",children:[e.jsxDEV("div",{draggable:!0,onDragStart:d=>j(d,r),onDragOver:E,onDrop:d=>H(d,r),onClick:d=>h(r,d),className:`flex items-center p-2 rounded-lg cursor-pointer transition-colors duration-200 group ${(a==null?void 0:a.id)===r.id?"bg-primary-50 border border-primary-200":s.includes(r.id)?"bg-accent-50 border border-accent-200":"hover:bg-secondary-50"}`,children:[e.jsxDEV("input",{type:"checkbox",checked:s.includes(r.id),onChange:d=>{d.stopPropagation();const f=d.target.checked?[...s,r.id]:s.filter(y=>y!==r.id);m(f)},className:"mr-2 rounded border-secondary-300 text-primary focus:ring-primary"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:213,columnNumber:15},void 0),e.jsxDEV("button",{onClick:d=>{d.stopPropagation(),l(r.id)},className:"mr-2 p-1 hover:bg-secondary-100 rounded transition-colors duration-200",children:e.jsxDEV(o,{"aria-hidden":"true",name:_.has(r.id)?"ChevronDown":"ChevronRight",size:14,className:"text-secondary-500"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:233,columnNumber:17},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:226,columnNumber:15},void 0),t(r.type),e.jsxDEV("div",{className:"flex-1 ml-2 min-w-0",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-sm font-medium text-text-primary truncate",children:r.title},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:245,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex items-center space-x-1 ml-2",children:e.jsxDEV("span",{className:"text-xs text-text-secondary",children:[((p=r.lessons)==null?void 0:p.length)||0," leçons"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:249,columnNumber:21},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:248,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:244,columnNumber:17},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:243,columnNumber:15},void 0),e.jsxDEV("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 ml-2",children:e.jsxDEV("button",{className:"p-1 hover:bg-secondary-100 rounded",children:e.jsxDEV(o,{name:"MoreVertical",size:14,"aria-label":"Plus d'options",className:"text-secondary-500"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:258,columnNumber:19},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:257,columnNumber:17},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:256,columnNumber:15},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:199,columnNumber:13},void 0),_.has(r.id)&&x(r.lessons)]},r.id,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:198,columnNumber:11},void 0)})},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:196,columnNumber:7},void 0),z=v(n,c);return e.jsxDEV("div",{className:"p-4 space-y-2",children:[z.map(i=>{var r;return e.jsxDEV("div",{className:"mb-2",children:[e.jsxDEV("div",{draggable:!0,onDragStart:p=>j(p,i),onDragOver:E,onDrop:p=>H(p,i),onClick:p=>h(i,p),className:`flex items-center p-3 rounded-lg cursor-pointer transition-colors duration-200 group ${(a==null?void 0:a.id)===i.id?"bg-primary-50 border border-primary-200":s.includes(i.id)?"bg-accent-50 border border-accent-200":"hover:bg-secondary-50"}`,children:[e.jsxDEV("input",{type:"checkbox",checked:s.includes(i.id),onChange:p=>{p.stopPropagation();const d=p.target.checked?[...s,i.id]:s.filter(f=>f!==i.id);m(d)},className:"mr-3 rounded border-secondary-300 text-primary focus:ring-primary"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:294,columnNumber:13},void 0),e.jsxDEV("button",{onClick:p=>{p.stopPropagation(),l(i.id)},className:"mr-3 p-1 hover:bg-secondary-100 rounded transition-colors duration-200",children:e.jsxDEV(o,{"aria-hidden":"true",name:_.has(i.id)?"ChevronDown":"ChevronRight",size:16,className:"text-secondary-500"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:314,columnNumber:15},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:307,columnNumber:13},void 0),t(i.type),e.jsxDEV("div",{className:"flex-1 ml-3 min-w-0",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"font-medium text-text-primary truncate",children:i.title},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:326,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center space-x-2 ml-2",children:[G(i.status),e.jsxDEV("span",{className:"text-xs text-text-secondary",children:[i.enrollments," inscrits"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:329,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:327,columnNumber:17},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:325,columnNumber:15},void 0),e.jsxDEV("div",{className:"text-sm text-text-secondary mt-1 truncate",children:[((r=i.modules)==null?void 0:r.length)||0," modules • ",i.price,"€"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:332,columnNumber:15},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:324,columnNumber:13},void 0),e.jsxDEV("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 ml-2",children:e.jsxDEV("button",{className:"p-1 hover:bg-secondary-100 rounded",children:e.jsxDEV(o,{name:"MoreVertical",size:16,"aria-label":"Plus d'options",className:"text-secondary-500"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:339,columnNumber:17},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:338,columnNumber:15},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:337,columnNumber:13},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:280,columnNumber:11},void 0),_.has(i.id)&&w(i.modules)]},i.id,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:279,columnNumber:9},void 0)}),z.length===0&&e.jsxDEV("div",{className:"text-center py-8",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"Search",size:48,className:"text-secondary-300 mx-auto mb-4"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:354,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-text-secondary",children:c?"Aucun contenu trouvé":"Aucun contenu disponible"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:360,columnNumber:11},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:353,columnNumber:9},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentTree.tsx",lineNumber:277,columnNumber:5},void 0)},Z=({size:n=16,className:c="",...a})=>{const s={width:n,height:n};return e.jsxDEV("div",{"aria-hidden":"true",className:`animate-spin rounded-full border-b-2 border-current ${c}`,style:s,...a},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/components/ui/Spinner.tsx",lineNumber:13,columnNumber:5},void 0)},U=Y,O={images:"course-images",videos:"lesson-videos",documents:"documents"};function J(n,c){const{data:a}=U.storage.from(n).getPublicUrl(c);return a.publicUrl}async function re(n){const{data:c,error:a}=await K(()=>U.storage.from(n).list(""));if(a)throw a;return c||[]}async function F(n,c){const a=`${Date.now()}-${c.name}`,{error:s}=await K(()=>U.storage.from(n).upload(a,c,{upsert:!0}));if(s)throw s;return{path:a,url:J(n,a)}}const ae=({course:n,onSave:c,onDelete:a})=>{var G;const[s,N]=b.useState({title:(n==null?void 0:n.title)??"",description:(n==null?void 0:n.description)??"",price:(n==null?void 0:n.price)??0,thumbnail:(n==null?void 0:n.thumbnail)??"",status:(n==null?void 0:n.status)??"draft",prerequisites:(n==null?void 0:n.prerequisites)??"",learningObjectives:(n==null?void 0:n.learningObjectives)??"",difficulty:(n==null?void 0:n.difficulty)??"beginner",estimatedDuration:(n==null?void 0:n.estimatedDuration)??0,tags:(n==null?void 0:n.tags)??[]}),[m,g]=b.useState({}),[_,V]=b.useState(!1),[u,D]=b.useState(!1),l=(t,v)=>{N(x=>({...x,[t]:v})),m[t]&&g(x=>({...x,[t]:null}))},h=()=>{const t={};return s.title.trim()||(t.title="Le titre est requis"),s.description.trim()||(t.description="La description est requise"),s.price<0&&(t.price="Le prix ne peut pas être négatif"),g(t),Object.keys(t).length===0},j=async()=>{if(h()){D(!0);try{await c({...n,...s})}finally{D(!1)}}},E=async t=>{var x;const v=(x=t.target.files)==null?void 0:x[0];if(v){V(!0);try{const{url:w}=await F(O.images,v);l("thumbnail",w)}catch(w){C.error("Thumbnail upload failed",w)}V(!1)}},H=[{value:"beginner",label:"Débutant",color:"text-accent"},{value:"intermediate",label:"Intermédiaire",color:"text-warning"},{value:"advanced",label:"Avancé",color:"text-error"}];return e.jsxDEV("div",{className:"flex-1 bg-surface overflow-y-auto",children:e.jsxDEV("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-8",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-text-primary",children:n!=null&&n.id?"Modifier le cours":"Nouveau cours"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:117,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-text-secondary mt-1",children:"Configurez les informations principales de votre cours"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:120,columnNumber:13},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:116,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV(B,{onClick:()=>l("status",s.status==="published"?"draft":"published"),className:`px-4 py-2 ${s.status==="published"?"bg-accent text-white hover:bg-accent-700":"bg-warning text-white hover:bg-warning-600"}`,variant:"outline",children:[e.jsxDEV(o,{"aria-hidden":"true",name:s.status==="published"?"Eye":"EyeOff",size:16,className:"mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:137,columnNumber:15},void 0),s.status==="published"?"Publié":"Brouillon"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:126,columnNumber:13},void 0),e.jsxDEV(B,{onClick:j,disabled:u,className:"px-6 py-2",children:[u?e.jsxDEV(Z,{size:16,className:"mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:148,columnNumber:17},void 0):e.jsxDEV(o,{"aria-hidden":"true",name:"Save",size:16,className:"mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:150,columnNumber:17},void 0),u?"Enregistrement...":"Enregistrer"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:146,columnNumber:13},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:125,columnNumber:11},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:115,columnNumber:9},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxDEV("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxDEV(T,{className:"p-6",children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-text-primary mb-4",children:"Informations générales"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:162,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(R,{id:"course-title",label:"Titre du cours *",value:s.title,onChange:t=>l("title",t.target.value),"aria-invalid":!!m.title,"aria-describedby":"course-title-error",placeholder:"Ex: Introduction à l'Intelligence Artificielle",error:m.title??void 0},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:167,columnNumber:17},void 0),m.title&&e.jsxDEV("p",{id:"course-title-error",role:"alert",className:"text-error text-sm mt-1",children:m.title},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:180,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Description *"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:190,columnNumber:19},void 0),e.jsxDEV("textarea",{id:"course-description",value:s.description,onChange:t=>l("description",t.target.value),rows:4,"aria-invalid":!!m.description,"aria-describedby":"course-description-error",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 resize-none ${m.description?"border-error":"border-border"}`,placeholder:"Décrivez le contenu et les objectifs de votre cours..."},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:193,columnNumber:19},void 0),m.description&&e.jsxDEV("p",{id:"course-description-error",role:"alert",className:"text-error text-sm mt-1",children:m.description},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:208,columnNumber:21},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:189,columnNumber:17},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV(R,{id:"course-price",type:"number",label:"Prix (€)",value:s.price,onChange:t=>l("price",parseFloat(t.target.value)||0),"aria-invalid":!!m.price,"aria-describedby":"course-price-error",error:m.price??void 0,inputClassName:"[appearance:textfield]",min:"0",step:"0.01"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:219,columnNumber:19},void 0),m.price&&e.jsxDEV("p",{id:"course-price-error",role:"alert",className:"text-error text-sm mt-1",children:m.price},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:235,columnNumber:21},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Niveau de difficulté"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:245,columnNumber:21},void 0),e.jsxDEV("select",{value:s.difficulty,onChange:t=>l("difficulty",t.target.value),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200",children:H.map(t=>e.jsxDEV("option",{value:t.value,children:t.label},t.value,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:256,columnNumber:25},void 0))},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:248,columnNumber:21},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:244,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:218,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Durée estimée (heures)"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:265,columnNumber:19},void 0),e.jsxDEV("input",{id:"estimated-duration",type:"number",value:s.estimatedDuration,onChange:t=>l("estimatedDuration",parseFloat(t.target.value)||0),"aria-invalid":!1,className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200",min:"0",step:"0.5"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:268,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:264,columnNumber:17},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:166,columnNumber:15},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:161,columnNumber:13},void 0),e.jsxDEV(T,{className:"p-6",children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-text-primary mb-4",children:"Objectifs pédagogiques"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:286,columnNumber:15},void 0),e.jsxDEV("textarea",{id:"learning-objectives",value:s.learningObjectives,onChange:t=>l("learningObjectives",t.target.value),rows:4,className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 resize-none",placeholder:"Listez les compétences et connaissances que les apprenants acquerront..."},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:290,columnNumber:15},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:285,columnNumber:13},void 0),e.jsxDEV(T,{className:"p-6",children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-text-primary mb-4",children:"Prérequis"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:304,columnNumber:15},void 0),e.jsxDEV("textarea",{id:"course-prerequisites",value:s.prerequisites,onChange:t=>l("prerequisites",t.target.value),rows:3,className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 resize-none",placeholder:"Décrivez les connaissances préalables nécessaires..."},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:306,columnNumber:15},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:303,columnNumber:13},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:159,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV(T,{className:"p-6",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Image de couverture"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:323,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-4",children:[s.thumbnail?e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(W,{src:s.thumbnail,alt:"Course thumbnail",className:"w-full h-32 object-cover rounded-lg"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:328,columnNumber:21},void 0),e.jsxDEV("button",{onClick:()=>l("thumbnail",""),className:"absolute top-2 right-2 p-1 bg-error text-white rounded-full hover:bg-error-600 transition-colors duration-200",children:e.jsxDEV(o,{name:"X",size:16,"aria-label":"Supprimer la miniature"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:337,columnNumber:23},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:333,columnNumber:21},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:327,columnNumber:19},void 0):e.jsxDEV("div",{className:"w-full h-32 border-2 border-dashed border-secondary-300 rounded-lg flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"Image",size:32,className:"text-secondary-400 mx-auto mb-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:343,columnNumber:23},void 0),e.jsxDEV("p",{className:"text-sm text-text-secondary",children:"Aucune image"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:349,columnNumber:23},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:342,columnNumber:21},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:341,columnNumber:19},void 0),e.jsxDEV("label",{className:"block",children:[e.jsxDEV("input",{type:"file",accept:"image/*",onChange:E,className:"hidden"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:355,columnNumber:19},void 0),e.jsxDEV("div",{className:"w-full px-4 py-2 border border-border rounded-lg text-center cursor-pointer hover:bg-secondary-50 transition-colors duration-200",children:_?e.jsxDEV("div",{className:"flex items-center justify-center",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"Loader2",size:16,className:"animate-spin mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:364,columnNumber:25},void 0),"Téléchargement..."]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:363,columnNumber:23},void 0):e.jsxDEV("div",{className:"flex items-center justify-center",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"Upload",size:16,className:"mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:374,columnNumber:25},void 0),"Choisir une image"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:373,columnNumber:23},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:361,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:354,columnNumber:17},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:325,columnNumber:15},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:322,columnNumber:13},void 0),(n==null?void 0:n.id)&&e.jsxDEV(T,{className:"p-6",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Statistiques"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:386,columnNumber:17},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("span",{className:"text-text-secondary",children:"Inscriptions"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:390,columnNumber:21},void 0),e.jsxDEV("span",{className:"font-semibold text-text-primary",children:n.enrollments||0},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:391,columnNumber:21},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:389,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("span",{className:"text-text-secondary",children:"Note moyenne"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:397,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"Star",size:16,className:"text-warning mr-1"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:399,columnNumber:23},void 0),e.jsxDEV("span",{className:"font-semibold text-text-primary",children:[n.rating||0,"/5"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:405,columnNumber:23},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:398,columnNumber:21},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:396,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("span",{className:"text-text-secondary",children:"Modules"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:412,columnNumber:21},void 0),e.jsxDEV("span",{className:"font-semibold text-text-primary",children:((G=n.modules)==null?void 0:G.length)||0},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:413,columnNumber:21},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:411,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:388,columnNumber:17},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:385,columnNumber:15},void 0),(n==null?void 0:n.id)&&e.jsxDEV(T,{className:"p-6 border-error",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-error mb-4",children:"Zone de danger"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:424,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-sm text-text-secondary mb-4",children:"La suppression du cours est irréversible et supprimera tous les modules et leçons associés."},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:426,columnNumber:17},void 0),e.jsxDEV(B,{onClick:()=>a(),className:"w-full px-4 py-2 bg-error text-white hover:bg-error-600",variant:"danger",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"Trash2",size:16,className:"mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:436,columnNumber:19},void 0),"Supprimer le cours"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:431,columnNumber:17},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:423,columnNumber:15},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:320,columnNumber:11},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:157,columnNumber:9},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:113,columnNumber:7},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/CourseEditor.tsx",lineNumber:112,columnNumber:5},void 0)},me=({module:n,onSave:c,onDelete:a})=>{var h,j,E,H,G;const[s,N]=b.useState({title:(n==null?void 0:n.title)||"",description:(n==null?void 0:n.description)||"",order:(n==null?void 0:n.order)||1,learningObjectives:(n==null?void 0:n.learningObjectives)||"",estimatedDuration:(n==null?void 0:n.estimatedDuration)||0,isOptional:(n==null?void 0:n.isOptional)||!1}),[m,g]=b.useState({}),[_,V]=b.useState(!1),u=(t,v)=>{N(x=>({...x,[t]:v})),m[t]&&g(x=>({...x,[t]:null}))},D=()=>{const t={};return s.title.trim()||(t.title="Le titre est requis"),s.description.trim()||(t.description="La description est requise"),g(t),Object.keys(t).length===0},l=async()=>{if(D()){V(!0);try{n&&await c({...n,...s})}finally{V(!1)}}};return e.jsxDEV("div",{className:"flex-1 bg-surface overflow-y-auto",children:e.jsxDEV("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-8",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-text-primary",children:n!=null&&n.id?"Modifier le module":"Nouveau module"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:78,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-text-secondary mt-1",children:"Organisez le contenu de votre module d’apprentissage"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:81,columnNumber:13},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:77,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center space-x-3",children:e.jsxDEV(B,{onClick:l,disabled:_,className:"px-6 py-2 bg-primary text-white hover:bg-primary-700",children:[_?e.jsxDEV(Z,{size:16,className:"mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:93,columnNumber:17},void 0):e.jsxDEV(o,{"aria-hidden":"true",name:"Save",size:16,className:"mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:95,columnNumber:17},void 0),_?"Enregistrement...":"Enregistrer"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:87,columnNumber:13},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:86,columnNumber:11},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:76,columnNumber:9},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxDEV("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxDEV("div",{className:"bg-white rounded-lg border border-border p-6",children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-text-primary mb-4",children:"Informations du module"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:107,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Titre du module *"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:113,columnNumber:19},void 0),e.jsxDEV("input",{type:"text",value:s.title,onChange:t=>u("title",t.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 ${m.title?"border-error":"border-border"}`,placeholder:"Ex: Concepts de base de l'IA"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:116,columnNumber:19},void 0),m.title&&e.jsxDEV("p",{className:"text-error text-sm mt-1",children:m.title},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:125,columnNumber:36},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:112,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Description *"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:129,columnNumber:19},void 0),e.jsxDEV("textarea",{value:s.description,onChange:t=>u("description",t.target.value),rows:4,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 resize-none ${m.description?"border-error":"border-border"}`,placeholder:"Décrivez le contenu et les objectifs de ce module..."},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:132,columnNumber:19},void 0),m.description&&e.jsxDEV("p",{className:"text-error text-sm mt-1",children:m.description},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:142,columnNumber:21},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:128,columnNumber:17},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Ordre dans le cours"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:148,columnNumber:21},void 0),e.jsxDEV("input",{type:"number",value:s.order,onChange:t=>u("order",parseInt(t.target.value)||1),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200",min:"1"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:151,columnNumber:21},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:147,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Durée estimée (heures)"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:161,columnNumber:21},void 0),e.jsxDEV("input",{type:"number",value:s.estimatedDuration,onChange:t=>u("estimatedDuration",parseFloat(t.target.value)||0),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200",min:"0",step:"0.5"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:164,columnNumber:21},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:160,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:146,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("input",{type:"checkbox",id:"isOptional",checked:s.isOptional,onChange:t=>u("isOptional",t.target.checked),className:"rounded border-secondary-300 text-primary focus:ring-primary"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:178,columnNumber:19},void 0),e.jsxDEV("label",{htmlFor:"isOptional",className:"ml-2 text-sm text-text-primary",children:"Module optionnel"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:185,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:177,columnNumber:17},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:111,columnNumber:15},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:106,columnNumber:13},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg border border-border p-6",children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-text-primary mb-4",children:"Objectifs d’apprentissage"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:194,columnNumber:15},void 0),e.jsxDEV("textarea",{value:s.learningObjectives,onChange:t=>u("learningObjectives",t.target.value),rows:4,className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 resize-none",placeholder:"Décrivez ce que les apprenants sauront faire à la fin de ce module..."},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:198,columnNumber:15},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:193,columnNumber:13},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg border border-border p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-text-primary",children:"Leçons du module"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:210,columnNumber:17},void 0),e.jsxDEV("button",{className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-700 transition-colors duration-200 font-medium",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"Plus",size:16,className:"mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:212,columnNumber:19},void 0),"Ajouter une leçon"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:211,columnNumber:17},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:209,columnNumber:15},void 0),n!=null&&n.lessons&&n.lessons.length>0?e.jsxDEV("div",{className:"space-y-3",children:n.lessons.map((t,v)=>e.jsxDEV("div",{className:"flex items-center justify-between p-4 border border-border rounded-lg hover:bg-secondary-50 transition-colors duration-200",children:[e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-secondary-100 rounded-full flex items-center justify-center mr-3",children:e.jsxDEV("span",{className:"text-sm font-medium text-text-secondary",children:v+1},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:226,columnNumber:27},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:225,columnNumber:25},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"font-medium text-text-primary",children:t.title},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:231,columnNumber:27},void 0),e.jsxDEV("p",{className:"text-sm text-text-secondary",children:[t.duration," min • ",t.completions," complétions"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:232,columnNumber:27},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:230,columnNumber:25},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:224,columnNumber:23},void 0),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("span",{className:`px-2 py-1 text-xs rounded-full ${t.status==="published"?"bg-accent-100 text-accent-700":"bg-warning-100 text-warning-700"}`,children:t.status==="published"?"Publié":"Brouillon"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:239,columnNumber:25},void 0),e.jsxDEV("button",{className:"p-2 text-text-secondary hover:text-text-primary hover:bg-secondary-100 rounded-lg transition-colors duration-200",children:e.jsxDEV(o,{name:"Edit",size:16,"aria-label":"Modifier la leçon"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:250,columnNumber:27},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:249,columnNumber:25},void 0),e.jsxDEV("button",{className:"p-2 text-text-secondary hover:text-error hover:bg-error-50 rounded-lg transition-colors duration-200",children:e.jsxDEV(o,{name:"Trash2",size:16,"aria-label":"Supprimer la leçon"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:254,columnNumber:27},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:253,columnNumber:25},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:238,columnNumber:23},void 0)]},t.id,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:220,columnNumber:21},void 0))},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:218,columnNumber:17},void 0):e.jsxDEV("div",{className:"text-center py-8",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"FileText",size:48,className:"text-secondary-300 mx-auto mb-4"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:262,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-text-secondary mb-4",children:"Aucune leçon dans ce module"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:268,columnNumber:19},void 0),e.jsxDEV("button",{className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-700 transition-colors duration-200 font-medium",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"Plus",size:16,className:"mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:270,columnNumber:21},void 0),"Créer la première leçon"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:269,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:261,columnNumber:17},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:208,columnNumber:13},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:104,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"bg-white rounded-lg border border-border p-6",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Progression"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:282,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex justify-between text-sm mb-2",children:[e.jsxDEV("span",{className:"text-text-secondary",children:"Leçons créées"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:287,columnNumber:21},void 0),e.jsxDEV("span",{className:"font-medium text-text-primary",children:[((h=n==null?void 0:n.lessons)==null?void 0:h.length)||0,"/5"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:288,columnNumber:21},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:286,columnNumber:19},void 0),e.jsxDEV("div",{className:"w-full bg-secondary-200 rounded-full h-2",children:e.jsxDEV("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${Math.min((((j=n==null?void 0:n.lessons)==null?void 0:j.length)||0)/5*100,100)}%`}},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:293,columnNumber:21},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:292,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:285,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex justify-between text-sm mb-2",children:[e.jsxDEV("span",{className:"text-text-secondary",children:"Contenu publié"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:304,columnNumber:21},void 0),e.jsxDEV("span",{className:"font-medium text-text-primary",children:[((E=n==null?void 0:n.lessons)==null?void 0:E.filter(t=>t.status==="published").length)||0,"/",((H=n==null?void 0:n.lessons)==null?void 0:H.length)||0]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:305,columnNumber:21},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:303,columnNumber:19},void 0),e.jsxDEV("div",{className:"w-full bg-secondary-200 rounded-full h-2",children:e.jsxDEV("div",{className:"bg-accent h-2 rounded-full transition-all duration-300",style:{width:(G=n==null?void 0:n.lessons)!=null&&G.length?`${n.lessons.filter(t=>t.status==="published").length/n.lessons.length*100}%`:"0%"}},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:311,columnNumber:21},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:310,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:302,columnNumber:17},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:284,columnNumber:15},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:281,columnNumber:13},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg border border-border p-6",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Paramètres"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:326,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-text-secondary",children:"Module optionnel"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:330,columnNumber:19},void 0),e.jsxDEV("div",{className:`w-12 h-6 rounded-full transition-colors duration-200 ${s.isOptional?"bg-primary":"bg-secondary-300"}`,children:e.jsxDEV("div",{className:`w-5 h-5 bg-white rounded-full shadow-sm transition-transform duration-200 mt-0.5 ${s.isOptional?"translate-x-6 ml-1":"translate-x-1"}`},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:336,columnNumber:21},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:331,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:329,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("span",{className:"text-text-secondary",children:"Ordre"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:345,columnNumber:19},void 0),e.jsxDEV("span",{className:"font-semibold text-text-primary",children:["#",s.order]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:346,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:344,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("span",{className:"text-text-secondary",children:"Durée estimée"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:350,columnNumber:19},void 0),e.jsxDEV("span",{className:"font-semibold text-text-primary",children:[s.estimatedDuration,"h"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:351,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:349,columnNumber:17},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:328,columnNumber:15},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:325,columnNumber:13},void 0),(n==null?void 0:n.id)&&e.jsxDEV("div",{className:"bg-white rounded-lg border border-error p-6",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-error mb-4",children:"Zone de danger"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:361,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-sm text-text-secondary mb-4",children:"La suppression du module supprimera également toutes les leçons qu’il contient."},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:363,columnNumber:17},void 0),e.jsxDEV("button",{onClick:()=>a(),className:"w-full px-4 py-2 bg-error text-white rounded-lg hover:bg-error-600 transition-colors duration-200 font-medium",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"Trash2",size:16,className:"mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:371,columnNumber:19},void 0),"Supprimer le module"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:367,columnNumber:17},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:360,columnNumber:15},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:279,columnNumber:11},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:102,columnNumber:9},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:74,columnNumber:7},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ModuleEditor.tsx",lineNumber:73,columnNumber:5},void 0)},de=({lesson:n,onSave:c,onDelete:a})=>{const[s,N]=b.useState({title:(n==null?void 0:n.title)??"",content:(n==null?void 0:n.content)??"",duration:(n==null?void 0:n.duration)??0,videoUrl:(n==null?void 0:n.videoUrl)??"",status:(n==null?void 0:n.status)??"draft",order:(n==null?void 0:n.order)??1,hasQuiz:(n==null?void 0:n.hasQuiz)??!1,allowComments:(n==null?void 0:n.allowComments)??!0,isPreview:(n==null?void 0:n.isPreview)??!1}),[m,g]=b.useState({}),[_,V]=b.useState(!1),[u,D]=b.useState("content"),l=(t,v)=>{N(x=>({...x,[t]:v})),m[t]&&g(x=>({...x,[t]:null}))},h=()=>{const t={};return s.title.trim()||(t.title="Le titre est requis"),s.content.trim()||(t.content="Le contenu est requis"),s.duration<=0&&(t.duration="La durée doit être supérieure à 0"),g(t),Object.keys(t).length===0},j=()=>{h()&&n&&c({...n,...s,type:"lesson"})},E=async t=>{var x;const v=(x=t.target.files)==null?void 0:x[0];if(v){V(!0);try{const{url:w}=await F(O.videos,v);l("videoUrl",w)}catch(w){C.error("Video upload failed",w)}V(!1)}},H=t=>t.split(`
`).map((v,x)=>e.jsxDEV("p",{className:"mb-4",children:v},x,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:95,columnNumber:7},void 0)),G=[{id:"content",label:"Contenu",icon:"FileText"},{id:"media",label:"Média",icon:"Video"},{id:"settings",label:"Paramètres",icon:"Settings"},{id:"preview",label:"Aperçu",icon:"Eye"}];return e.jsxDEV("div",{className:"flex-1 bg-surface overflow-y-auto",children:e.jsxDEV("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-8",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-text-primary",children:n!=null&&n.id?"Modifier la leçon":"Nouvelle leçon"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:114,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-text-secondary mt-1",children:"Créez du contenu engageant pour vos apprenants"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:117,columnNumber:13},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:113,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("button",{onClick:()=>l("status",s.status==="published"?"draft":"published"),className:`px-4 py-2 rounded-lg font-medium transition-colors duration-200 ${s.status==="published"?"bg-accent text-white hover:bg-accent-700":"bg-warning text-white hover:bg-warning-600"}`,children:[e.jsxDEV(o,{"aria-hidden":"true",name:s.status==="published"?"Eye":"EyeOff",size:16,className:"mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:133,columnNumber:15},void 0),s.status==="published"?"Publié":"Brouillon"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:123,columnNumber:13},void 0),e.jsxDEV("button",{onClick:j,className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary-700 transition-colors duration-200 font-medium",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"Save",size:16,className:"mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:146,columnNumber:15},void 0),"Enregistrer"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:142,columnNumber:13},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:122,columnNumber:11},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:112,columnNumber:9},void 0),e.jsxDEV("div",{className:"border-b border-border mb-6",children:e.jsxDEV("nav",{className:"flex space-x-8",children:G.map(t=>e.jsxDEV("button",{onClick:()=>D(t.id),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 flex items-center ${u===t.id?"border-primary text-primary":"border-transparent text-text-secondary hover:text-text-primary hover:border-secondary-300"}`,children:[e.jsxDEV(o,{"aria-hidden":"true",name:t.icon,size:16,className:"mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:165,columnNumber:17},void 0),t.label]},t.id,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:156,columnNumber:15},void 0))},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:154,columnNumber:11},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:153,columnNumber:9},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsxDEV("div",{className:"lg:col-span-3",children:[u==="content"&&e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"bg-white rounded-lg border border-border p-6",children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-text-primary mb-4",children:"Informations de base"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:179,columnNumber:19},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Titre de la leçon *"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:185,columnNumber:23},void 0),e.jsxDEV("input",{id:"lesson-title",type:"text",value:s.title,onChange:t=>l("title",t.target.value),"aria-invalid":!!m.title,"aria-describedby":"lesson-title-error",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 ${m.title?"border-error":"border-border"}`,placeholder:"Ex: Qu'est-ce que l'Intelligence Artificielle ?"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:188,columnNumber:23},void 0),m.title&&e.jsxDEV("p",{id:"lesson-title-error",role:"alert",className:"text-error text-sm mt-1",children:m.title},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:203,columnNumber:25},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:184,columnNumber:21},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Durée (minutes) *"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:215,columnNumber:25},void 0),e.jsxDEV("input",{id:"lesson-duration",type:"number",value:s.duration,onChange:t=>l("duration",parseInt(t.target.value)||0),"aria-invalid":!!m.duration,"aria-describedby":"lesson-duration-error",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 ${m.duration?"border-error":"border-border"}`,min:"1"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:218,columnNumber:25},void 0),m.duration&&e.jsxDEV("p",{id:"lesson-duration-error",role:"alert",className:"text-error text-sm mt-1",children:m.duration},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:233,columnNumber:27},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:214,columnNumber:23},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Ordre dans le module"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:240,columnNumber:25},void 0),e.jsxDEV("input",{id:"lesson-order",type:"number",value:s.order,onChange:t=>l("order",parseInt(t.target.value)||1),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200",min:"1"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:243,columnNumber:25},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:239,columnNumber:23},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:213,columnNumber:21},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:183,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:178,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg border border-border p-6",children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-text-primary mb-4",children:"Contenu de la leçon"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:260,columnNumber:19},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex space-x-2 mb-4",children:[e.jsxDEV("button",{className:"px-3 py-1 text-sm bg-primary-50 text-primary rounded hover:bg-primary-100 transition-colors duration-200",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"Bold",size:14,className:"mr-1"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:267,columnNumber:25},void 0),"Gras"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:266,columnNumber:23},void 0),e.jsxDEV("button",{className:"px-3 py-1 text-sm bg-secondary-100 text-text-secondary rounded hover:bg-secondary-200 transition-colors duration-200",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"Italic",size:14,className:"mr-1"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:271,columnNumber:25},void 0),"Italique"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:270,columnNumber:23},void 0),e.jsxDEV("button",{className:"px-3 py-1 text-sm bg-secondary-100 text-text-secondary rounded hover:bg-secondary-200 transition-colors duration-200",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"List",size:14,className:"mr-1"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:275,columnNumber:25},void 0),"Liste"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:274,columnNumber:23},void 0),e.jsxDEV("button",{className:"px-3 py-1 text-sm bg-secondary-100 text-text-secondary rounded hover:bg-secondary-200 transition-colors duration-200",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"Link",size:14,className:"mr-1"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:279,columnNumber:25},void 0),"Lien"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:278,columnNumber:23},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:265,columnNumber:21},void 0),e.jsxDEV("textarea",{id:"lesson-content",value:s.content,onChange:t=>l("content",t.target.value),rows:12,"aria-invalid":!!m.content,"aria-describedby":"lesson-content-error",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 resize-none font-mono text-sm ${m.content?"border-error":"border-border"}`,placeholder:"Rédigez le contenu de votre leçon ici..."},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:284,columnNumber:21},void 0),m.content&&e.jsxDEV("p",{id:"lesson-content-error",role:"alert",className:"text-error text-sm mt-1",children:m.content},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:299,columnNumber:23},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:264,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:259,columnNumber:17},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:176,columnNumber:15},void 0),u==="media"&&e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"bg-white rounded-lg border border-border p-6",children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-text-primary mb-4",children:"Vidéo de la leçon"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:312,columnNumber:19},void 0),s.videoUrl?e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"aspect-video bg-secondary-100 rounded-lg flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"Play",size:48,className:"text-secondary-400 mx-auto mb-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:320,columnNumber:27},void 0),e.jsxDEV("p",{className:"text-text-secondary",children:"Aperçu vidéo"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:326,columnNumber:27},void 0),e.jsxDEV("p",{className:"text-sm text-text-secondary mt-1",children:s.videoUrl},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:327,columnNumber:27},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:319,columnNumber:25},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:318,columnNumber:23},void 0),e.jsxDEV("div",{className:"flex space-x-3",children:[e.jsxDEV("button",{onClick:()=>l("videoUrl",""),className:"px-4 py-2 bg-error text-white rounded-lg hover:bg-error-600 transition-colors duration-200",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"Trash2",size:16,className:"mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:336,columnNumber:27},void 0),"Supprimer"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:332,columnNumber:25},void 0),e.jsxDEV("label",{className:"px-4 py-2 bg-secondary-100 text-text-secondary rounded-lg hover:bg-secondary-200 transition-colors duration-200 cursor-pointer",children:[e.jsxDEV("input",{type:"file",accept:"video/*",onChange:E,className:"hidden"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:341,columnNumber:27},void 0),e.jsxDEV(o,{"aria-hidden":"true",name:"Upload",size:16,className:"mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:347,columnNumber:27},void 0),"Remplacer"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:340,columnNumber:25},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:331,columnNumber:23},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:317,columnNumber:21},void 0):e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"aspect-video border-2 border-dashed border-secondary-300 rounded-lg flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"Video",size:48,className:"text-secondary-400 mx-auto mb-4"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:356,columnNumber:27},void 0),e.jsxDEV("p",{className:"text-text-secondary mb-2",children:"Aucune vidéo téléchargée"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:362,columnNumber:27},void 0),e.jsxDEV("p",{className:"text-sm text-text-secondary",children:"Formats supportés: MP4, WebM, MOV"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:363,columnNumber:27},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:355,columnNumber:25},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:354,columnNumber:23},void 0),e.jsxDEV("label",{className:"block",children:[e.jsxDEV("input",{type:"file",accept:"video/*",onChange:E,className:"hidden"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:370,columnNumber:25},void 0),e.jsxDEV("div",{className:"w-full px-4 py-3 border border-border rounded-lg text-center cursor-pointer hover:bg-secondary-50 transition-colors duration-200",children:_?e.jsxDEV("div",{className:"flex items-center justify-center",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"Loader2",size:20,className:"animate-spin mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:379,columnNumber:31},void 0),"Téléchargement en cours..."]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:378,columnNumber:29},void 0):e.jsxDEV("div",{className:"flex items-center justify-center",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"Upload",size:20,className:"mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:389,columnNumber:31},void 0),"Télécharger une vidéo"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:388,columnNumber:29},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:376,columnNumber:25},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:369,columnNumber:23},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:353,columnNumber:21},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:311,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg border border-border p-6",children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-text-primary mb-4",children:"Ressources supplémentaires"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:401,columnNumber:19},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("button",{className:"w-full px-4 py-3 border border-border rounded-lg text-center hover:bg-secondary-50 transition-colors duration-200",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"FileText",size:20,className:"mx-auto mb-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:407,columnNumber:23},void 0),e.jsxDEV("p",{className:"text-text-secondary",children:"Ajouter des documents PDF"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:408,columnNumber:23},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:406,columnNumber:21},void 0),e.jsxDEV("button",{className:"w-full px-4 py-3 border border-border rounded-lg text-center hover:bg-secondary-50 transition-colors duration-200",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"Image",size:20,className:"mx-auto mb-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:412,columnNumber:23},void 0),e.jsxDEV("p",{className:"text-text-secondary",children:"Ajouter des images"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:413,columnNumber:23},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:411,columnNumber:21},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:405,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:400,columnNumber:17},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:309,columnNumber:15},void 0),u==="settings"&&e.jsxDEV("div",{className:"space-y-6",children:e.jsxDEV("div",{className:"bg-white rounded-lg border border-border p-6",children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-text-primary mb-4",children:"Paramètres de la leçon"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:424,columnNumber:19},void 0),e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-medium text-text-primary",children:"Quiz intégré"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:431,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-sm text-text-secondary",children:"Ajouter un quiz à la fin de cette leçon"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:432,columnNumber:25},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:430,columnNumber:23},void 0),e.jsxDEV("button",{onClick:()=>l("hasQuiz",!s.hasQuiz),className:`w-12 h-6 rounded-full transition-colors duration-200 ${s.hasQuiz?"bg-primary":"bg-secondary-300"}`,children:e.jsxDEV("div",{className:`w-5 h-5 bg-white rounded-full shadow-sm transition-transform duration-200 mt-0.5 ${s.hasQuiz?"translate-x-6 ml-1":"translate-x-1"}`},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:442,columnNumber:25},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:436,columnNumber:23},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:429,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-medium text-text-primary",children:"Commentaires"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:452,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-sm text-text-secondary",children:"Permettre aux apprenants de commenter"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:453,columnNumber:25},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:451,columnNumber:23},void 0),e.jsxDEV("button",{onClick:()=>l("allowComments",!s.allowComments),className:`w-12 h-6 rounded-full transition-colors duration-200 ${s.allowComments?"bg-primary":"bg-secondary-300"}`,children:e.jsxDEV("div",{className:`w-5 h-5 bg-white rounded-full shadow-sm transition-transform duration-200 mt-0.5 ${s.allowComments?"translate-x-6 ml-1":"translate-x-1"}`},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:463,columnNumber:25},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:457,columnNumber:23},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:450,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-medium text-text-primary",children:"Aperçu gratuit"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:473,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-sm text-text-secondary",children:"Cette leçon est accessible sans inscription"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:474,columnNumber:25},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:472,columnNumber:23},void 0),e.jsxDEV("button",{onClick:()=>l("isPreview",!s.isPreview),className:`w-12 h-6 rounded-full transition-colors duration-200 ${s.isPreview?"bg-primary":"bg-secondary-300"}`,children:e.jsxDEV("div",{className:`w-5 h-5 bg-white rounded-full shadow-sm transition-transform duration-200 mt-0.5 ${s.isPreview?"translate-x-6 ml-1":"translate-x-1"}`},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:484,columnNumber:25},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:478,columnNumber:23},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:471,columnNumber:21},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:428,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:423,columnNumber:17},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:421,columnNumber:15},void 0),u==="preview"&&e.jsxDEV("div",{className:"space-y-6",children:e.jsxDEV("div",{className:"bg-white rounded-lg border border-border p-6",children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-text-primary mb-4",children:"Aperçu de la leçon"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:500,columnNumber:19},void 0),e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-text-primary mb-2",children:s.title||"Titre de la leçon"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:506,columnNumber:23},void 0),e.jsxDEV("div",{className:"flex items-center space-x-4 text-sm text-text-secondary",children:[e.jsxDEV("span",{className:"flex items-center",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"Clock",size:16,className:"mr-1"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:511,columnNumber:27},void 0),s.duration," minutes"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:510,columnNumber:25},void 0),e.jsxDEV("span",{className:"flex items-center",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"User",size:16,className:"mr-1"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:515,columnNumber:27},void 0),"Leçon #",s.order]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:514,columnNumber:25},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:509,columnNumber:23},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:505,columnNumber:21},void 0),s.videoUrl&&e.jsxDEV("div",{className:"aspect-video bg-secondary-100 rounded-lg flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"Play",size:64,className:"text-secondary-400 mx-auto mb-4"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:524,columnNumber:27},void 0),e.jsxDEV("p",{className:"text-text-secondary",children:"Vidéo de la leçon"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:530,columnNumber:27},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:523,columnNumber:25},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:522,columnNumber:23},void 0),e.jsxDEV("div",{className:"prose prose-lg max-w-none",children:s.content?H(s.content):e.jsxDEV("p",{className:"text-text-secondary italic",children:"Le contenu de la leçon apparaîtra ici..."},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:539,columnNumber:25},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:535,columnNumber:21},void 0),s.hasQuiz&&e.jsxDEV("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"HelpCircle",size:20,className:"text-primary mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:548,columnNumber:27},void 0),e.jsxDEV("span",{className:"font-medium text-primary",children:"Quiz de fin de leçon activé"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:554,columnNumber:27},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:547,columnNumber:25},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:546,columnNumber:23},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:504,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:499,columnNumber:17},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:497,columnNumber:15},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:174,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"bg-white rounded-lg border border-border p-6",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Statistiques"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:570,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("span",{className:"text-text-secondary",children:"Statut"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:574,columnNumber:19},void 0),e.jsxDEV("span",{className:`px-2 py-1 text-xs rounded-full ${s.status==="published"?"bg-accent-100 text-accent-700":"bg-warning-100 text-warning-700"}`,children:s.status==="published"?"Publié":"Brouillon"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:575,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:573,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("span",{className:"text-text-secondary",children:"Durée"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:587,columnNumber:19},void 0),e.jsxDEV("span",{className:"font-semibold text-text-primary",children:[s.duration," min"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:588,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:586,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("span",{className:"text-text-secondary",children:"Ordre"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:592,columnNumber:19},void 0),e.jsxDEV("span",{className:"font-semibold text-text-primary",children:["#",s.order]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:593,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:591,columnNumber:17},void 0),(n==null?void 0:n.completions)&&e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("span",{className:"text-text-secondary",children:"Complétions"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:598,columnNumber:21},void 0),e.jsxDEV("span",{className:"font-semibold text-text-primary",children:n.completions},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:599,columnNumber:21},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:597,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:572,columnNumber:15},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:569,columnNumber:13},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg border border-border p-6",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Fonctionnalités"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:607,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV(o,{"aria-hidden":"true",name:s.hasQuiz?"CheckCircle":"Circle",size:16,className:s.hasQuiz?"text-accent":"text-secondary-400"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:611,columnNumber:19},void 0),e.jsxDEV("span",{className:"ml-2 text-sm text-text-secondary",children:"Quiz intégré"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:617,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:610,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV(o,{"aria-hidden":"true",name:s.allowComments?"CheckCircle":"Circle",size:16,className:s.allowComments?"text-accent":"text-secondary-400"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:621,columnNumber:19},void 0),e.jsxDEV("span",{className:"ml-2 text-sm text-text-secondary",children:"Commentaires"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:627,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:620,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV(o,{"aria-hidden":"true",name:s.isPreview?"CheckCircle":"Circle",size:16,className:s.isPreview?"text-accent":"text-secondary-400"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:631,columnNumber:19},void 0),e.jsxDEV("span",{className:"ml-2 text-sm text-text-secondary",children:"Aperçu gratuit"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:637,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:630,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV(o,{"aria-hidden":"true",name:s.videoUrl?"CheckCircle":"Circle",size:16,className:s.videoUrl?"text-accent":"text-secondary-400"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:641,columnNumber:19},void 0),e.jsxDEV("span",{className:"ml-2 text-sm text-text-secondary",children:"Vidéo"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:647,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:640,columnNumber:17},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:609,columnNumber:15},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:606,columnNumber:13},void 0),(n==null?void 0:n.id)&&e.jsxDEV("div",{className:"bg-white rounded-lg border border-error p-6",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-error mb-4",children:"Zone de danger"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:655,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-sm text-text-secondary mb-4",children:"La suppression de cette leçon est irréversible."},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:657,columnNumber:17},void 0),e.jsxDEV("button",{onClick:()=>a(),className:"w-full px-4 py-2 bg-error text-white rounded-lg hover:bg-error-600 transition-colors duration-200 font-medium",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"Trash2",size:16,className:"mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:665,columnNumber:19},void 0),"Supprimer la leçon"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:661,columnNumber:17},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:654,columnNumber:15},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:567,columnNumber:11},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:172,columnNumber:9},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:110,columnNumber:7},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/LessonEditor.tsx",lineNumber:109,columnNumber:5},void 0)},le=({selectedItems:n,onClose:c,onExecute:a})=>{const[s,N]=b.useState(""),[m,g]=b.useState(""),_=[{id:"publish",label:"Publier",description:"Publier tous les éléments sélectionnés",icon:"Eye",color:"text-accent",bgColor:"bg-accent-50",borderColor:"border-accent-200"},{id:"unpublish",label:"Dépublier",description:"Mettre en brouillon tous les éléments sélectionnés",icon:"EyeOff",color:"text-warning",bgColor:"bg-warning-50",borderColor:"border-warning-200"},{id:"duplicate",label:"Dupliquer",description:"Créer une copie de tous les éléments sélectionnés",icon:"Copy",color:"text-primary",bgColor:"bg-primary-50",borderColor:"border-primary-200"},{id:"export",label:"Exporter",description:"Exporter les éléments sélectionnés en JSON",icon:"Download",color:"text-secondary-600",bgColor:"bg-secondary-50",borderColor:"border-secondary-200"},{id:"delete",label:"Supprimer",description:"Supprimer définitivement tous les éléments sélectionnés",icon:"Trash2",color:"text-error",bgColor:"bg-error-50",borderColor:"border-error-200"}],V=()=>{s==="delete"&&m!=="SUPPRIMER"||a(s,n)},u=_.find(l=>l.id===s),D=s==="delete";return e.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxDEV("div",{className:"bg-surface rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxDEV("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-xl font-semibold text-text-primary",children:"Actions groupées"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:79,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-text-secondary mt-1",children:[n.length," élément",n.length>1?"s":""," sélectionné",n.length>1?"s":""]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:80,columnNumber:13},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:78,columnNumber:11},void 0),e.jsxDEV("button",{onClick:c,className:"p-2 text-text-secondary hover:text-text-primary hover:bg-secondary-100 rounded-lg transition-colors duration-200",children:e.jsxDEV(o,{name:"X",size:20,"aria-label":"Fermer"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:90,columnNumber:13},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:86,columnNumber:11},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:77,columnNumber:9},void 0),e.jsxDEV("div",{className:"p-6",children:[e.jsxDEV("div",{className:"mb-6",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-text-primary mb-4",children:"Choisissez une action"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:98,columnNumber:13},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:_.map(l=>e.jsxDEV("button",{onClick:()=>N(l.id),className:`p-4 border-2 rounded-lg text-left transition-all duration-200 hover:shadow-subtle ${s===l.id?`${l.borderColor} ${l.bgColor}`:"border-border hover:border-secondary-300"}`,children:e.jsxDEV("div",{className:"flex items-start",children:[e.jsxDEV(o,{"aria-hidden":"true",name:l.icon,size:20,className:`${l.color} mr-3 mt-0.5`},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:112,columnNumber:21},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"font-medium text-text-primary",children:l.label},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:119,columnNumber:23},void 0),e.jsxDEV("p",{className:"text-sm text-text-secondary mt-1",children:l.description},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:120,columnNumber:23},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:118,columnNumber:21},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:111,columnNumber:19},void 0)},l.id,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:102,columnNumber:17},void 0))},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:100,columnNumber:13},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:97,columnNumber:11},void 0),D&&e.jsxDEV("div",{className:"mb-6 p-4 bg-error-50 border border-error-200 rounded-lg",children:e.jsxDEV("div",{className:"flex items-start",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"AlertTriangle",size:20,className:"text-error mr-3 mt-0.5"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:132,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("h4",{className:"font-medium text-error mb-2",children:"Attention : Action irréversible"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:139,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-sm text-error-700 mb-4",children:["Cette action supprimera définitivement ",n.length," élément",n.length>1?"s":"","et ne peut pas être annulée. Tapez ",e.jsxDEV("strong",{children:"SUPPRIMER"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:143,columnNumber:56},void 0)," pour confirmer."]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:140,columnNumber:19},void 0),e.jsxDEV("input",{type:"text",value:m,onChange:l=>g(l.target.value),placeholder:"Tapez SUPPRIMER",className:"w-full px-3 py-2 border border-error-300 rounded-lg focus:ring-2 focus:ring-error focus:border-transparent"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:146,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:138,columnNumber:17},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:131,columnNumber:15},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:130,columnNumber:13},void 0),u&&e.jsxDEV("div",{className:`mb-6 p-4 ${u.bgColor} border ${u.borderColor} rounded-lg`,children:e.jsxDEV("div",{className:"flex items-start",children:[e.jsxDEV(o,{"aria-hidden":"true",name:u.icon,size:20,className:`${u.color} mr-3 mt-0.5`},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:164,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"font-medium text-text-primary mb-2",children:["Action sélectionnée : ",u.label]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:171,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-sm text-text-secondary",children:["Cette action sera appliquée à ",n.length," élément",n.length>1?"s":"","."]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:174,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:170,columnNumber:17},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:163,columnNumber:15},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:160,columnNumber:13},void 0),e.jsxDEV("div",{className:"mb-6",children:[e.jsxDEV("h4",{className:"font-medium text-text-primary mb-3",children:"Éléments sélectionnés"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:185,columnNumber:13},void 0),e.jsxDEV("div",{className:"max-h-40 overflow-y-auto border border-border rounded-lg",children:n.map((l,h)=>e.jsxDEV("div",{className:`px-4 py-2 flex items-center justify-between ${h!==n.length-1?"border-b border-border":""}`,children:[e.jsxDEV("span",{className:"text-sm text-text-secondary",children:["Élément ID: ",l]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:195,columnNumber:19},void 0),e.jsxDEV(o,{"aria-hidden":"true",name:"Check",size:16,className:"text-accent"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:196,columnNumber:19},void 0)]},l,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:189,columnNumber:17},void 0))},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:187,columnNumber:13},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:184,columnNumber:11},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:95,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-border bg-secondary-50",children:[e.jsxDEV("button",{onClick:c,className:"px-4 py-2 text-text-secondary hover:text-text-primary hover:bg-secondary-100 rounded-lg transition-colors duration-200",children:"Annuler"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:205,columnNumber:11},void 0),e.jsxDEV("button",{onClick:V,disabled:!s||D&&m!=="SUPPRIMER",className:`px-6 py-2 rounded-lg font-medium transition-colors duration-200 ${!s||D&&m!=="SUPPRIMER"?"bg-secondary-300 text-secondary-500 cursor-not-allowed":(u==null?void 0:u.id)==="delete"?"bg-error text-white hover:bg-error-600":"bg-primary text-white hover:bg-primary-700"}`,children:u?e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV(o,{"aria-hidden":"true",name:u.icon,size:16,className:"mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:227,columnNumber:17},void 0),u.label]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:226,columnNumber:15},void 0):"Sélectionner une action"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:212,columnNumber:11},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:204,columnNumber:9},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:75,columnNumber:7},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/BulkOperations.tsx",lineNumber:74,columnNumber:5},void 0)},ue=({searchQuery:n,onSearchChange:c,onCreateNew:a})=>e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"Search",size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-secondary-400"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentSearch.tsx",lineNumber:19,columnNumber:9},void 0),e.jsxDEV("input",{type:"text",placeholder:"Rechercher du contenu...",value:n,onChange:s=>c(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentSearch.tsx",lineNumber:25,columnNumber:9},void 0),n&&e.jsxDEV("button",{onClick:()=>c(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-secondary-400 hover:text-text-primary",children:e.jsxDEV(o,{name:"X",size:16,"aria-label":"Effacer la recherche"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentSearch.tsx",lineNumber:37,columnNumber:13},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentSearch.tsx",lineNumber:33,columnNumber:11},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentSearch.tsx",lineNumber:18,columnNumber:7},void 0),e.jsxDEV("button",{onClick:a,className:"w-full px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-700 transition-colors duration-200 flex items-center justify-center font-medium",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"Plus",size:20,className:"mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentSearch.tsx",lineNumber:47,columnNumber:9},void 0),"Nouveau contenu"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentSearch.tsx",lineNumber:43,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex space-x-2",children:[e.jsxDEV("button",{className:"px-3 py-1 text-xs bg-primary-50 text-primary rounded-full hover:bg-primary-100 transition-colors duration-200",children:"Tous"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentSearch.tsx",lineNumber:53,columnNumber:9},void 0),e.jsxDEV("button",{className:"px-3 py-1 text-xs bg-secondary-100 text-text-secondary rounded-full hover:bg-secondary-200 transition-colors duration-200",children:"Publiés"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentSearch.tsx",lineNumber:56,columnNumber:9},void 0),e.jsxDEV("button",{className:"px-3 py-1 text-xs bg-secondary-100 text-text-secondary rounded-full hover:bg-secondary-200 transition-colors duration-200",children:"Brouillons"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentSearch.tsx",lineNumber:59,columnNumber:9},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentSearch.tsx",lineNumber:52,columnNumber:7},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/ContentSearch.tsx",lineNumber:16,columnNumber:5},void 0),ce=({onClose:n,onSelectMedia:c})=>{var z;const[a,s]=b.useState("images"),[N,m]=b.useState(""),[g,_]=b.useState([]),[V,u]=b.useState(!1),[D,l]=b.useState([]),[h,j]=b.useState({images:0,videos:0,documents:0}),E=[{id:"images",label:"Images",icon:"Image",count:h.images},{id:"videos",label:"Vidéos",icon:"Video",count:h.videos},{id:"documents",label:"Documents",icon:"FileText",count:h.documents}],H=async i=>{try{const p=(await re(O[i])||[]).map(d=>{var f;return{id:d.id||d.name,name:d.name,url:J(O[i],d.name),size:((f=d.metadata)==null?void 0:f.size)||d.size||0,uploadDate:d.updated_at,type:i.slice(0,-1)}});l(p),j(d=>({...d,[i]:p.length}))}catch(r){C.error("Failed to load media",r),l([]),j(p=>({...p,[i]:0}))}};b.useEffect(()=>{H(a)},[a]);const G=async i=>{const r=Array.from(i.target.files??[]);if(r.length){u(!0);try{await Promise.all(r.map(p=>F(O[a],p))),H(a)}catch(p){C.error("Upload failed",p)}u(!1)}},t=i=>{g.includes(i.id)?_(g.filter(r=>r!==i.id)):_([...g,i.id])},v=()=>{const i=D.filter(r=>g.includes(r.id));c(i)},x=D.filter(i=>i.name.toLowerCase().includes(N.toLowerCase())),w=i=>{const r=g.includes(i.id);return e.jsxDEV("div",{onClick:()=>t(i),className:`relative cursor-pointer rounded-lg border-2 transition-all duration-200 hover:shadow-medium ${r?"border-primary bg-primary-50":"border-border hover:border-secondary-300"}`,children:[e.jsxDEV("div",{className:"absolute top-2 right-2 z-10",children:e.jsxDEV("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${r?"bg-primary border-primary":"bg-white border-secondary-300"}`,children:r&&e.jsxDEV(o,{"aria-hidden":"true",name:"Check",size:14,color:"white"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:123,columnNumber:28},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:118,columnNumber:11},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:117,columnNumber:9},void 0),e.jsxDEV("div",{className:"aspect-square bg-secondary-100 rounded-t-lg overflow-hidden",children:i.type==="image"?e.jsxDEV(W,{src:i.url,alt:i.name,className:"w-full h-full object-cover"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:130,columnNumber:13},void 0):i.type==="video"?e.jsxDEV("div",{className:"w-full h-full flex items-center justify-center",children:e.jsxDEV(o,{"aria-hidden":"true",name:"Play",size:32,className:"text-secondary-400"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:133,columnNumber:15},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:132,columnNumber:13},void 0):e.jsxDEV("div",{className:"w-full h-full flex items-center justify-center",children:e.jsxDEV(o,{"aria-hidden":"true",name:"FileText",size:32,className:"text-secondary-400"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:137,columnNumber:15},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:136,columnNumber:13},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:128,columnNumber:9},void 0),e.jsxDEV("div",{className:"p-3",children:[e.jsxDEV("h4",{className:"font-medium text-text-primary text-sm truncate mb-1",children:i.name},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:144,columnNumber:11},void 0),e.jsxDEV("div",{className:"text-xs text-text-secondary space-y-1",children:[i.size&&e.jsxDEV("div",{children:[(i.size/1024/1024).toFixed(2)," MB"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:146,columnNumber:27},void 0),i.dimensions&&e.jsxDEV("div",{children:i.dimensions},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:147,columnNumber:33},void 0),i.duration&&e.jsxDEV("div",{children:i.duration},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:148,columnNumber:31},void 0),i.pages&&e.jsxDEV("div",{children:[i.pages," pages"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:149,columnNumber:28},void 0),e.jsxDEV("div",{children:new Date(i.uploadDate).toLocaleDateString("fr-FR")},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:150,columnNumber:13},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:145,columnNumber:11},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:143,columnNumber:9},void 0)]},i.id,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:109,columnNumber:7},void 0)};return e.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxDEV("div",{className:"bg-surface rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxDEV("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-xl font-semibold text-text-primary",children:"Bibliothèque multimédia"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:163,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-text-secondary mt-1",children:"Gérez vos fichiers et ressources"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:164,columnNumber:13},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:162,columnNumber:11},void 0),e.jsxDEV("button",{onClick:n,className:"p-2 text-text-secondary hover:text-text-primary hover:bg-secondary-100 rounded-lg transition-colors duration-200",children:e.jsxDEV(o,{name:"X",size:20,"aria-label":"Fermer la bibliothèque"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:171,columnNumber:13},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:167,columnNumber:11},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:161,columnNumber:9},void 0),e.jsxDEV("div",{className:"border-b border-border",children:e.jsxDEV("nav",{className:"flex px-6",children:E.map(i=>e.jsxDEV("button",{onClick:()=>{s(i.id),_([])},className:`py-3 px-4 border-b-2 font-medium text-sm transition-colors duration-200 flex items-center ${a===i.id?"border-primary text-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:[e.jsxDEV(o,{"aria-hidden":"true",name:i.icon,size:16,className:"mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:191,columnNumber:17},void 0),i.label,e.jsxDEV("span",{className:"ml-2 px-2 py-0.5 bg-secondary-100 text-secondary-600 rounded-full text-xs",children:i.count},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:193,columnNumber:17},void 0)]},i.id,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:179,columnNumber:15},void 0))},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:177,columnNumber:11},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:176,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex items-center justify-between p-6 border-b border-border bg-secondary-50",children:[e.jsxDEV("div",{className:"flex-1 max-w-md",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"Search",size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-secondary-400"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:206,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",placeholder:"Rechercher des fichiers...",value:N,onChange:i=>m(i.target.value),className:"w-full pl-10 pr-4 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:212,columnNumber:15},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:205,columnNumber:13},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:204,columnNumber:11},void 0),e.jsxDEV("label",{className:"ml-4 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-700 transition-colors duration-200 cursor-pointer font-medium",children:[e.jsxDEV("input",{type:"file",multiple:!0,accept:a==="images"?"image/*":a==="videos"?"video/*":".pdf,.doc,.docx,.txt",onChange:G,className:"hidden"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:224,columnNumber:13},void 0),V?e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"Loader2",size:16,className:"animate-spin mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:239,columnNumber:17},void 0),"Téléchargement..."]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:238,columnNumber:15},void 0):e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"Upload",size:16,className:"mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:244,columnNumber:17},void 0),"Télécharger"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:243,columnNumber:15},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:223,columnNumber:11},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:202,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex-1 overflow-y-auto p-6",children:x.length>0?e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:x.map(w)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:254,columnNumber:13},void 0):e.jsxDEV("div",{className:"text-center py-12",children:[e.jsxDEV(o,{"aria-hidden":"true",name:((z=E.find(i=>i.id===a))==null?void 0:z.icon)||"File",size:64,className:"text-secondary-300 mx-auto mb-4"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:259,columnNumber:15},void 0),e.jsxDEV("h3",{className:"text-lg font-medium text-text-primary mb-2",children:N?"Aucun fichier trouvé":"Aucun fichier"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:265,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-text-secondary mb-6",children:N?"Essayez de modifier votre recherche":"Téléchargez vos premiers fichiers pour commencer"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:268,columnNumber:15},void 0),!N&&e.jsxDEV("label",{className:"inline-flex items-center px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-700 transition-colors duration-200 cursor-pointer font-medium",children:[e.jsxDEV("input",{type:"file",multiple:!0,accept:a==="images"?"image/*":a==="videos"?"video/*":".pdf,.doc,.docx,.txt",onChange:G,className:"hidden"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:275,columnNumber:19},void 0),e.jsxDEV(o,{"aria-hidden":"true",name:"Upload",size:16,className:"mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:288,columnNumber:19},void 0),"Télécharger des fichiers"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:274,columnNumber:17},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:258,columnNumber:13},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:252,columnNumber:9},void 0),g.length>0&&e.jsxDEV("div",{className:"flex items-center justify-between p-6 border-t border-border bg-secondary-50",children:[e.jsxDEV("div",{className:"text-sm text-text-secondary",children:[g.length," fichier",g.length>1?"s":""," sélectionné",g.length>1?"s":""]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:299,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("button",{onClick:()=>_([]),className:"px-4 py-2 text-text-secondary hover:text-text-primary hover:bg-secondary-100 rounded-lg transition-colors duration-200",children:"Annuler"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:305,columnNumber:15},void 0),e.jsxDEV("button",{onClick:v,className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary-700 transition-colors duration-200 font-medium",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"Check",size:16,className:"mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:316,columnNumber:17},void 0),"Sélectionner"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:312,columnNumber:15},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:304,columnNumber:13},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:298,columnNumber:11},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:159,columnNumber:7},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/components/MediaLibrary.tsx",lineNumber:158,columnNumber:5},void 0)},pe=n=>typeof n=="object"&&n!==null&&"type"in n&&["course","module","lesson"].includes(n.type??""),X=n=>{var a;if(pe(n)){const s={id:n.id,title:n.title,...n.description?{description:n.description}:{}};return n.type==="course"?{...s,type:"course",status:"draft",price:n.price||0}:n.type==="module"?{...s,type:"module",status:"draft",lessons:[]}:{...s,type:"lesson",status:"draft",duration:n.duration||0}}const c={id:n.id,title:n.title,type:"course",status:"draft",...n.description?{description:n.description}:{}};return(a=n.modules)!=null&&a.length&&(c.modules=n.modules.map(s=>{var N;return{id:s.id,title:s.title,type:"module",status:"draft",...s.description?{description:s.description}:{},...(N=s.lessons)!=null&&N.length?{lessons:s.lessons.map(m=>({id:m.id,title:m.title,type:"lesson",status:"draft",...m.duration?{duration:m.duration}:{}}))}:{}}})),c},fe=()=>{const{setSidebarOpen:n}=te(),[c,a]=b.useState(null),[s,N]=b.useState("course"),[m,g]=b.useState(!1),[_,V]=b.useState(""),[u,D]=b.useState([]),[l,h]=b.useState(!1),[j,E]=b.useState([]),[H,G]=b.useState(!0),{createCourse:t,updateCourse:v,deleteCourse:x}=ee();b.useEffect(()=>{(async()=>{G(!0);try{const f=await ne();E(f.map(y=>ie(y)))}catch(f){C.error("Failed to fetch courses",f),k.error("Erreur lors du chargement du contenu")}finally{G(!1)}})()},[]);const w=d=>{a(d),N(d.type)},z=async d=>{try{if(s==="course"){const f=d;let y;const S=f.title?f.title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""):`course-${Date.now()}`,L={title:f.title,description:f.description||"",price:f.price||0,status:f.status||"draft",slug:S,updated_at:new Date().toISOString()},M={title:L.title,description:L.description,price:L.price,status:L.status,slug:L.slug,updated_at:L.updated_at,category:null,cover_image_url:null,difficulty:null,is_published:!1,thumbnail_url:null,created_at:f.createdAt||new Date().toISOString()};if(f.id&&!f.id.startsWith("temp-")&&(M.id=f.id),M.id){const{id:q,...P}=M,A=await v({id:q,updates:P});y=Q(A),E($=>$.map(I=>I.id===y.id?y:I)),k.success("Cours mis à jour avec succès !")}else{const{id:q,...P}=M,A=await t(P);y=Q(A),E($=>[...$,y]),k.success("Cours créé avec succès !")}a(y)}else C.info("Saving non-course content (local state only):",d),a(d)}catch(f){C.error("Erreur lors de la sauvegarde du contenu:",f),k.error("Erreur lors de la sauvegarde du contenu")}},i=async d=>{try{s==="course"?(await x(d),E(f=>f.filter(y=>y.id!==d)),a(null),k.success("Cours supprimé avec succès !")):(C.info("Deleting non-course content (local state only):",d),a(null))}catch(f){C.error("Erreur lors de la suppression du contenu:",f),k.error("Erreur lors de la suppression du contenu")}},r=(d,f)=>{C.info("Bulk operation:",d,f),D([]),h(!1)},p=()=>{if(!c)return e.jsxDEV("div",{className:"flex-1 flex items-center justify-center bg-surface",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"FileText",size:64,className:"text-secondary-300 mx-auto mb-4"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:233,columnNumber:13},void 0),e.jsxDEV("h3",{className:"text-xl font-semibold text-text-primary mb-2",children:"Sélectionnez un contenu à modifier"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:239,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-text-secondary",children:"Choisissez un cours, module ou leçon dans l'arbre de contenu pour commencer l'édition."},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:242,columnNumber:13},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:232,columnNumber:11},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:231,columnNumber:9},void 0);const d=async L=>{try{await z(L)}catch(M){C.error("Error saving content:",M),k.error("Erreur lors de la sauvegarde du contenu")}},f=async L=>{try{await z(L)}catch(M){C.error("Error saving content:",M),k.error("Erreur lors de la sauvegarde du contenu")}},y=async L=>{try{await z(L)}catch(M){C.error("Error saving content:",M),k.error("Erreur lors de la sauvegarde du contenu")}},S=()=>{c.id&&i(c.id)};switch(s){case"course":return e.jsxDEV(ae,{course:c,onSave:d,onDelete:S},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:286,columnNumber:11},void 0);case"module":return e.jsxDEV(me,{module:c,onSave:f,onDelete:S},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:294,columnNumber:11},void 0);case"lesson":return e.jsxDEV(de,{lesson:c,onSave:y,onDelete:S},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:302,columnNumber:11},void 0);default:return e.jsxDEV("div",{className:"flex-1 flex items-center justify-center bg-surface",children:e.jsxDEV("div",{className:"text-center",children:e.jsxDEV("h3",{className:"text-xl font-semibold text-text-primary mb-2",children:"Type de contenu non pris en charge"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:312,columnNumber:15},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:311,columnNumber:13},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:310,columnNumber:11},void 0)}};return H?e.jsxDEV("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxDEV(o,{"aria-hidden":"true",name:"Loader",className:"animate-spin text-primary",size:48},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:324,columnNumber:9},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:323,columnNumber:7},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("header",{className:"bg-surface shadow-subtle border-b border-border fixed top-16 left-0 right-0 z-30 lg:left-64",children:e.jsxDEV("div",{className:"flex items-center h-16 px-6",children:[e.jsxDEV("button",{onClick:()=>n(!0),className:"lg:hidden p-2 rounded-md hover:bg-secondary-100 transition-colors",children:e.jsxDEV(o,{"aria-hidden":"true",name:"Menu",size:20},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:337,columnNumber:13},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:333,columnNumber:11},void 0),e.jsxDEV("h1",{className:"text-xl font-semibold text-text-primary ml-4",children:"Gestion du Contenu"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:339,columnNumber:11},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:332,columnNumber:9},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:331,columnNumber:7},void 0),e.jsxDEV("main",{className:"p-6 pt-16",children:[e.jsxDEV("div",{className:"flex h-[calc(100vh-4rem)]",children:[e.jsxDEV("div",{className:"w-80 bg-surface border-r border-border flex flex-col",children:[e.jsxDEV("div",{className:"p-4 border-b border-border",children:[e.jsxDEV(ue,{searchQuery:_,onSearchChange:V,onCreateNew:()=>a({id:`temp-${Date.now()}`,type:"course",title:"",description:"",price:0,status:"draft"})},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:346,columnNumber:15},void 0),u.length>0&&e.jsxDEV("button",{onClick:()=>h(!0),className:"mt-3 w-full px-3 py-2 bg-primary text-white rounded-lg text-sm font-medium hover:bg-primary-700 transition-colors duration-200 flex items-center justify-center",children:[e.jsxDEV(o,{"aria-hidden":"true",name:"Edit",size:16,className:"mr-2"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:365,columnNumber:19},void 0),"Actions groupées (",u.length,")"]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:361,columnNumber:17},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:345,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex-1 overflow-y-auto",children:e.jsxDEV(oe,{contentData:j.map(X),searchQuery:_,selectedContent:c?X(c):null,selectedItems:u,onContentSelect:d=>w(d),onItemsSelect:D,onReorder:d=>{const f=d.map(y=>j.find(L=>L.id===y.id)??{...y,type:"course"});E(f)}},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:371,columnNumber:15},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:370,columnNumber:13},void 0),e.jsxDEV("div",{className:"p-4 border-t border-border bg-secondary-50",children:e.jsxDEV("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-2xl font-bold text-primary",children:j.length},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:390,columnNumber:19},void 0),e.jsxDEV("div",{className:"text-xs text-text-secondary",children:"Cours"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:391,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:389,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-2xl font-bold text-accent",children:j.reduce((d,f)=>{var y;return d+(((y=f.modules)==null?void 0:y.length)||0)},0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:394,columnNumber:19},void 0),e.jsxDEV("div",{className:"text-xs text-text-secondary",children:"Modules"},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:397,columnNumber:19},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:393,columnNumber:17},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:388,columnNumber:15},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:387,columnNumber:13},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:344,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex-1 flex flex-col",children:p()},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:402,columnNumber:11},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:343,columnNumber:9},void 0),m&&e.jsxDEV(ce,{onClose:()=>g(!1),onSelectMedia:d=>{C.info("Selected media:",d),g(!1)}},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:405,columnNumber:11},void 0),l&&e.jsxDEV(le,{selectedItems:u,onClose:()=>h(!1),onExecute:r},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:414,columnNumber:11},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:342,columnNumber:7},void 0)]},void 0,!0,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:330,columnNumber:5},void 0)},_e=()=>e.jsxDEV(se,{children:e.jsxDEV(fe,{},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:429,columnNumber:5},void 0)},void 0,!1,{fileName:"/mnt/c/GitHub/ai_foundations_lms/apps/frontend/src/pages/cms/index.tsx",lineNumber:428,columnNumber:3},void 0);export{_e as default};
//# sourceMappingURL=index-CXU-YkDp.js.map
