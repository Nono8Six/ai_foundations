#!/bin/sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ¶ Running pre-commit hook..."

echo "   Validating environment variables..."
pnpm validate:env || {
  echo "   âŒ Environment validation failed. Please check your .env file."
  exit 1
}
echo "   âœ… Environment variables validated."

echo "   Running lint-staged..."
npx lint-staged || {
  echo "   âŒ lint-staged failed. Please check the errors above."
  exit 1
}
echo "   âœ… lint-staged completed."

# Optionnel: ExÃ©cuter les tests relatifs aux fichiers modifiÃ©s.
# echo "   Running related tests..."
# pnpm test --related --run --passWithNoTests || {
#   echo "   âŒ Tests failed. Please check the errors above."
#   exit 1
# }
# echo "   âœ… Related tests passed."

echo "âœ… Pre-commit hook passed."
exit 0
